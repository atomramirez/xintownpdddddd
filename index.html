<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏≥‡∏£‡∏ß‡∏à - ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap');

        body {
            font-family: 'Sarabun', sans-serif;
            box-sizing: border-box;
        }

        /* Enhanced Menu Cards with Beautiful Animations */
        .menu-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: translateY(0);
            position: relative;
            overflow: hidden;
        }

        .menu-card:hover {
            transform: translateY(-15px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15), 0 0 30px rgba(59, 130, 246, 0.3);
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .menu-card:hover::before {
            left: 100%;
        }

        /* Enhanced Button Styles */
        .enhanced-btn {
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .enhanced-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .enhanced-btn:hover::before {
            left: 100%;
        }

        /* Floating Animation */
        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        /* Background Animations */
        @keyframes slowFloat {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            50% {
                transform: translateY(-20px) rotate(5deg);
            }
        }

        @keyframes gentlePulse {

            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(1.1);
            }
        }

        @keyframes driftLeft {
            0% {
                transform: translateX(100vw) rotate(0deg);
            }

            100% {
                transform: translateX(-100px) rotate(360deg);
            }
        }

        @keyframes driftRight {
            0% {
                transform: translateX(-100px) rotate(0deg);
            }

            100% {
                transform: translateX(100vw) rotate(-360deg);
            }
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.2;
            }

            50% {
                opacity: 0.8;
            }
        }

        .bg-element {
            position: fixed;
            pointer-events: none;
            z-index: 1;
        }

        .slow-float {
            animation: slowFloat 6s ease-in-out infinite;
        }

        .gentle-pulse {
            animation: gentlePulse 4s ease-in-out infinite;
        }

        .drift-left {
            animation: driftLeft 25s linear infinite;
        }

        .drift-right {
            animation: driftRight 30s linear infinite;
        }

        .twinkle {
            animation: twinkle 3s ease-in-out infinite;
        }

        /* Gradient Orbs */
        .gradient-orb {
            border-radius: 50%;
            filter: blur(1px);
        }

        .gradient-orb-1 {
            background: radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, rgba(59, 130, 246, 0.1) 50%, transparent 100%);
        }

        .gradient-orb-2 {
            background: radial-gradient(circle, rgba(147, 51, 234, 0.3) 0%, rgba(147, 51, 234, 0.1) 50%, transparent 100%);
        }

        .gradient-orb-3 {
            background: radial-gradient(circle, rgba(236, 72, 153, 0.3) 0%, rgba(236, 72, 153, 0.1) 50%, transparent 100%);
        }

        /* Glowing Effect */
        .glow-effect {
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }

        .category-tab.active {
            color: #2563eb;
            border-bottom-color: #2563eb;
            box-shadow: 0 2px 10px rgba(37, 99, 235, 0.3);
        }

        .category-content {
            display: block;
        }

        .category-content.hidden {
            display: none;
        }

        /* Music Tab Styles */
        .music-tab {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }

        .music-tab.active {
            color: #2563eb;
            border-bottom-color: #2563eb;
        }

        .tab-content {
            display: block;
        }

        .tab-content.hidden {
            display: none;
        }

        .page-content {
            display: block;
        }

        .page-content.hidden {
            display: none;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffffff, #f3f4f6);
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 2px 6px rgba(0, 0, 0, 0.3);
            border: 3px solid rgba(255, 255, 255, 0.9);
            transition: all 0.2s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            transform: scale(1.15);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.5), 0 3px 8px rgba(0, 0, 0, 0.4);
            border: 3px solid #ffffff;
        }

        .slider::-moz-range-thumb {
            height: 20px;
            width: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffffff, #f3f4f6);
            cursor: pointer;
            border: 3px solid rgba(255, 255, 255, 0.9);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4), 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        .slider {
            background: linear-gradient(to right, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.4));
            border-radius: 12px;
            outline: none;
            transition: all 0.2s ease;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .slider:hover {
            background: linear-gradient(to right, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.6));
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(255, 255, 255, 0.3);
        }

        /* Force 24-hour format for time inputs */
        .time-24h {
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }

        .time-24h::-webkit-calendar-picker-indicator {
            filter: invert(1);
        }

        .time-24h::-webkit-inner-spin-button,
        .time-24h::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Hide AM/PM completely */
        .time-24h::-webkit-datetime-edit-ampm-field {
            display: none !important;
            visibility: hidden !important;
            width: 0 !important;
            height: 0 !important;
        }

        .time-24h::-webkit-datetime-edit {
            color: #374151;
            font-size: 1.125rem;
        }

        /* Additional CSS to force 24-hour format */
        input[type="time"].time-24h {
            font-family: monospace;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-900 via-blue-800 to-indigo-900 min-h-screen">
    <!-- Animated Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none" style="z-index: 1;">
        <!-- Floating Gradient Orbs -->
        <div class="bg-element gradient-orb gradient-orb-1 w-32 h-32 slow-float"
            style="top: 10%; left: 5%; animation-delay: 0s;"></div>
        <div class="bg-element gradient-orb gradient-orb-2 w-24 h-24 gentle-pulse"
            style="top: 20%; right: 10%; animation-delay: 1s;"></div>
        <div class="bg-element gradient-orb gradient-orb-3 w-40 h-40 slow-float"
            style="bottom: 15%; left: 15%; animation-delay: 2s;"></div>
        <div class="bg-element gradient-orb gradient-orb-1 w-20 h-20 gentle-pulse"
            style="top: 60%; right: 20%; animation-delay: 3s;"></div>
        <div class="bg-element gradient-orb gradient-orb-2 w-28 h-28 slow-float"
            style="bottom: 30%; right: 5%; animation-delay: 4s;"></div>

        <!-- Drifting Elements -->
        <div class="bg-element drift-left text-6xl opacity-20" style="top: 25%; animation-delay: 0s;">üöî</div>
        <div class="bg-element drift-right text-4xl opacity-15" style="top: 45%; animation-delay: 5s;">‚öñÔ∏è</div>
        <div class="bg-element drift-left text-5xl opacity-10" style="top: 70%; animation-delay: 10s;">üèõÔ∏è</div>
        <div class="bg-element drift-right text-3xl opacity-20" style="top: 15%; animation-delay: 15s;">üëÆ‚Äç‚ôÇÔ∏è</div>

        <!-- Twinkling Stars -->
        <div class="bg-element twinkle w-2 h-2 bg-white rounded-full" style="top: 12%; left: 25%; animation-delay: 0s;">
        </div>
        <div class="bg-element twinkle w-1 h-1 bg-blue-200 rounded-full"
            style="top: 35%; left: 70%; animation-delay: 1s;"></div>
        <div class="bg-element twinkle w-2 h-2 bg-purple-200 rounded-full"
            style="top: 55%; left: 40%; animation-delay: 2s;"></div>
        <div class="bg-element twinkle w-1 h-1 bg-white rounded-full" style="top: 75%; left: 80%; animation-delay: 3s;">
        </div>
        <div class="bg-element twinkle w-2 h-2 bg-blue-300 rounded-full"
            style="top: 25%; left: 90%; animation-delay: 4s;"></div>
        <div class="bg-element twinkle w-1 h-1 bg-purple-300 rounded-full"
            style="top: 85%; left: 15%; animation-delay: 5s;"></div>

        <!-- Subtle Geometric Shapes -->
        <div class="bg-element slow-float opacity-10" style="top: 40%; left: 8%; animation-delay: 1s;">
            <div class="w-16 h-16 border-2 border-white/20 rotate-45"></div>
        </div>
        <div class="bg-element gentle-pulse opacity-15" style="top: 65%; right: 15%; animation-delay: 3s;">
            <div class="w-12 h-12 border-2 border-blue-300/30 rounded-full"></div>
        </div>
        <div class="bg-element slow-float opacity-10" style="top: 30%; right: 35%; animation-delay: 2s;">
            <div class="w-8 h-8 bg-purple-400/20 transform rotate-12"></div>
        </div>
    </div>

    <!-- Navigation Bar -->
    <nav id="navbar"
        class="bg-white/10 backdrop-blur-md border-b border-white/20 shadow-lg shadow-blue-500/20 glow-effect relative z-10 transition-transform duration-300">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold text-white flex items-center float-animation">
                    üöî XINTOWN POLICE
                </h1>
                <div class="flex items-center space-x-4">
                    <!-- Music Controls -->
                    <div
                        class="flex items-center space-x-1 bg-white/15 backdrop-blur-md rounded-lg px-2 py-1 border border-white/20 shadow-lg">
                        <!-- Previous Song -->
                        <button id="prevBtnNav"
                            class="text-white hover:text-blue-200 transition-all duration-300 text-sm hover:scale-110"
                            title="‡πÄ‡∏û‡∏•‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤">
                            ‚èÆÔ∏è
                        </button>
                        <!-- Play/Pause -->
                        <button id="playPauseBtnNav"
                            class="text-white hover:text-blue-200 transition-all duration-300 text-sm hover:scale-110"
                            title="‡πÄ‡∏•‡πà‡∏ô/‡∏´‡∏¢‡∏∏‡∏î">
                            ‚ñ∂Ô∏è
                        </button>
                        <!-- Next Song -->
                        <button id="nextBtnNav"
                            class="text-white hover:text-blue-200 transition-all duration-300 text-sm hover:scale-110"
                            title="‡πÄ‡∏û‡∏•‡∏á‡∏ñ‡∏±‡∏î‡πÑ‡∏õ">
                            ‚è≠Ô∏è
                        </button>
                        <div class="w-px h-3 bg-white/30"></div>
                        <button id="autoplayBtn"
                            class="text-white hover:text-blue-200 transition-all duration-300 text-sm hover:scale-110 bg-green-600/30 px-1 py-0.5 rounded"
                            title="‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥">
                            üîÑ
                        </button>
                        <button id="loopBtn"
                            class="text-white hover:text-blue-200 transition-all duration-300 text-sm hover:scale-110 bg-blue-600/30 px-1 py-0.5 rounded"
                            title="‡∏ß‡∏ô‡∏ã‡πâ‡∏≥">
                            üîÅ
                        </button>
                        <div class="w-px h-3 bg-white/30"></div>
                        <button id="muteBtn"
                            class="text-white hover:text-blue-200 transition-all duration-300 text-sm hover:scale-110"
                            title="‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á">
                            üîä
                        </button>
                        <input type="range" id="volumeSliderNav" min="0" max="100" value="20"
                            class="w-16 h-2 bg-white/40 rounded-lg appearance-none cursor-pointer slider border border-white/30">
                        <span id="volumeDisplayNav"
                            class="text-white text-xs bg-white/30 px-1 py-0.5 rounded min-w-[30px] text-center border border-white/20">20%</span>
                        <div class="w-px h-3 bg-white/30"></div>
                        <button id="changeMusicBtn"
                            class="text-white hover:text-blue-200 transition-all duration-300 text-sm hover:scale-110 bg-white/25 hover:bg-white/35 px-1 py-0.5 rounded"
                            title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏û‡∏•‡∏á">
                            üéµ
                        </button>
                    </div>
                    <button onclick="showPage('shiftSummaryPage')" id="shiftBtn"
                        class="text-white hover:text-blue-200 transition-colors font-medium enhanced-btn bg-white/10 px-4 py-2 rounded-lg mr-2">
                        ‚è∞ ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡∏£
                    </button>
                    <button onclick="goToHomePage()" id="homeBtn"
                        class="text-white hover:text-blue-200 transition-colors font-medium enhanced-btn bg-white/10 px-4 py-2 rounded-lg">
                        üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </button>
                </div>
            </div>
        </div>
    </nav>


    <!-- Hidden Players -->
    <div id="youtubePlayer" style="display: none;"></div>
    <audio id="audioPlayer" style="display: none;" preload="auto"></audio>

    <!-- Music Selection Modal -->
    <div id="musicModal"
        class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden flex items-center justify-center">
        <div class="bg-white rounded-2xl shadow-2xl p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-3xl font-bold text-gray-800">üéµ ‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á</h3>
                <button onclick="closeMusicModal()" class="text-gray-500 hover:text-gray-700 text-2xl">‚úï</button>
            </div>

            <!-- Add Song Section -->
            <div class="mb-6">
                <h4 class="text-lg font-semibold text-gray-700 mb-3">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡πÉ‡∏´‡∏°‡πà</h4>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <!-- YouTube URL -->
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-2">üé¨ ‡∏à‡∏≤‡∏Å YouTube URL</label>
                        <div class="flex gap-2">
                            <input type="text" id="youtubeUrl" placeholder="‡∏ß‡∏≤‡∏á YouTube URL ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."
                                class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <button id="addSongBtn"
                                class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors">
                                ‡πÄ‡∏û‡∏¥‡πà‡∏°
                            </button>
                        </div>
                    </div>
                </div>
                <p class="text-xs text-gray-500 mt-2">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏ö‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏≠‡∏á YouTube
                </p>
            </div>

            <!-- Current Playing -->
            <div class="bg-gradient-to-r from-purple-100 to-blue-100 rounded-xl p-6 mb-6 border border-purple-200">
                <div class="flex items-center justify-between mb-4">
                    <h4 class="text-lg font-semibold text-gray-800">üéµ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô</h4>
                    <div class="flex items-center gap-3">
                        <span class="text-sm text-gray-600">üîä</span>
                        <input type="range" id="volumeSliderModal" min="0" max="100" value="20"
                            class="w-24 h-2 bg-gray-300 rounded-lg appearance-none cursor-pointer">
                        <span id="volumeDisplayModal" class="text-sm w-8 text-gray-600">20%</span>
                    </div>
                </div>

                <div id="currentSongModal" class="text-center">
                    <div class="text-lg font-medium mb-2 text-gray-800">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô</div>
                    <div class="text-sm text-gray-600">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á</div>
                </div>

                <!-- Player Controls -->
                <div class="flex justify-center gap-4 mt-6">
                    <button id="prevBtnModal"
                        class="bg-gray-600 hover:bg-gray-700 text-white p-3 rounded-full transition-colors">
                        ‚èÆÔ∏è
                    </button>
                    <button id="playPauseBtnModal"
                        class="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full transition-colors">
                        ‚ñ∂Ô∏è
                    </button>
                    <button id="nextBtnModal"
                        class="bg-gray-600 hover:bg-gray-700 text-white p-3 rounded-full transition-colors">
                        ‚è≠Ô∏è
                    </button>
                    <button id="autoplayBtnModal"
                        class="bg-green-600 hover:bg-green-700 text-white p-3 rounded-full transition-colors"
                        title="‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥">
                        üîÑ
                    </button>
                    <button id="loopBtnModal"
                        class="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full transition-colors"
                        title="‡∏ß‡∏ô‡∏ã‡πâ‡∏≥">
                        üîÅ
                    </button>
                </div>
            </div>

            <!-- Playlist -->
            <div class="mb-4">
                <h4 class="text-lg font-semibold text-gray-700 mb-3 flex items-center">
                    üìã ‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå
                    <span id="playlistCountModal"
                        class="ml-2 bg-blue-600 text-white text-xs px-2 py-1 rounded-full">0</span>
                </h4>

                <div id="playlistModal" class="space-y-3 max-h-60 overflow-y-auto">
                    <div class="text-center text-gray-400 py-8">
                        <div class="text-4xl mb-2">üéµ</div>
                        <p>‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</p>
                        <p class="text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</p>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="flex justify-between mt-6">
                <button onclick="clearMainPlaylist()"
                    class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm">
                    üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå
                </button>
            </div>

            <!-- Close Button -->
            <div class="flex justify-center mt-6">
                <button onclick="closeMusicModal()"
                    class="bg-gray-500 hover:bg-gray-600 text-white px-8 py-2 rounded-lg">
                    ‡∏õ‡∏¥‡∏î
                </button>
            </div>
        </div>
    </div>

    <script>
        class MusicSystem {
            constructor() {
                this.playlist = [];
                this.currentIndex = -1;
                this.player = null;
                this.audioPlayer = null;
                this.isPlaying = false;
                this.volume = 20;
                this.isPlayerReady = false;
                this.currentPlayerType = null;
                this.autoplay = true;
                this.loop = true;

                this.initializeElements();
                this.bindEvents();
                this.loadYouTubeAPI();
                this.initializeAudioPlayer();
                this.addWelcomeSong();
                this.updateAutoplayButton();
                this.updateLoopButton();
            }

            initializeElements() {
                this.youtubeUrl = document.getElementById('youtubeUrl');
                this.addSongBtn = document.getElementById('addSongBtn');
                this.currentSong = document.getElementById('currentSongModal');
                this.playlistElement = document.getElementById('playlistModal');
                this.playlistCount = document.getElementById('playlistCountModal');
                this.volumeSlider = document.getElementById('volumeSliderModal');
                this.volumeDisplay = document.getElementById('volumeDisplayModal');
                this.playPauseBtn = document.getElementById('playPauseBtnModal');
                this.prevBtn = document.getElementById('prevBtnModal');
                this.nextBtn = document.getElementById('nextBtnModal');
                this.audioPlayer = document.getElementById('audioPlayer');
            }

            bindEvents() {
                this.addSongBtn.addEventListener('click', () => this.addSong());
                this.youtubeUrl.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.addSong();
                });
                this.volumeSlider.addEventListener('input', (e) => this.setVolume(e.target.value));
                this.playPauseBtn.addEventListener('click', () => this.togglePlayPause());
                this.prevBtn.addEventListener('click', () => this.previousSong());
                this.nextBtn.addEventListener('click', () => this.nextSong());
                document.getElementById('autoplayBtnModal').addEventListener('click', () => this.toggleAutoplay());
                document.getElementById('loopBtnModal').addEventListener('click', () => this.toggleLoop());
                this.bindNavigationEvents();
            }

            bindNavigationEvents() {
                document.getElementById('playPauseBtnNav').addEventListener('click', () => {
                    this.togglePlayPause();
                });
                document.getElementById('prevBtnNav').addEventListener('click', () => {
                    this.previousSong();
                });
                document.getElementById('nextBtnNav').addEventListener('click', () => {
                    this.nextSong();
                });
                document.getElementById('muteBtn').addEventListener('click', () => {
                    if (this.volume > 0) {
                        this.previousVolume = this.volume;
                        this.setVolume(0);
                        document.getElementById('muteBtn').textContent = 'üîá';
                    } else {
                        this.setVolume(this.previousVolume || 20);
                        document.getElementById('muteBtn').textContent = 'üîä';
                    }
                });
                document.getElementById('volumeSliderNav').addEventListener('input', (e) => {
                    this.setVolume(e.target.value);
                });
                document.getElementById('changeMusicBtn').addEventListener('click', () => {
                    openMusicModal();
                });
                document.getElementById('autoplayBtn').addEventListener('click', () => {
                    this.toggleAutoplay();
                });
                document.getElementById('loopBtn').addEventListener('click', () => {
                    this.toggleLoop();
                });
            }

            initializeAudioPlayer() {
                this.audioPlayer.addEventListener('ended', () => {
                    if (this.autoplay) {
                        this.nextSong();
                    }
                });
                this.audioPlayer.addEventListener('play', () => {
                    this.isPlaying = true;
                    this.updatePlayButtons('‚è∏Ô∏è');
                });
                this.audioPlayer.addEventListener('pause', () => {
                    this.isPlaying = false;
                    this.updatePlayButtons('‚ñ∂Ô∏è');
                });
            }

            updatePlayButtons(text) {
                this.playPauseBtn.textContent = text;
                document.getElementById('playPauseBtnNav').textContent = text;
            }

            loadYouTubeAPI() {
                if (window.YT) {
                    this.initializePlayer();
                    return;
                }

                const tag = document.createElement('script');
                tag.src = 'https://www.youtube.com/iframe_api';
                const firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

                window.onYouTubeIframeAPIReady = () => {
                    this.initializePlayer();
                };
            }

            initializePlayer() {
                this.player = new YT.Player('youtubePlayer', {
                    height: '0',
                    width: '0',
                    playerVars: {
                        autoplay: 0,
                        controls: 0,
                        disablekb: 1,
                        fs: 0,
                        modestbranding: 1,
                        rel: 0
                    },
                    events: {
                        onReady: () => {
                            this.isPlayerReady = true;
                            this.player.setVolume(this.volume);

                            if (this.playlist.length > 0 && !this.playlist[0].isLocalFile) {
                                this.loadAndPlay(this.playlist[0].id);
                            }
                        },
                        onStateChange: (event) => {
                            if (event.data === YT.PlayerState.ENDED) {
                                if (this.autoplay) {
                                    this.nextSong();
                                }
                            } else if (event.data === YT.PlayerState.PLAYING) {
                                this.isPlaying = true;
                                this.updatePlayButtons('‚è∏Ô∏è');
                            } else if (event.data === YT.PlayerState.PAUSED) {
                                this.isPlaying = false;
                                this.updatePlayButtons('‚ñ∂Ô∏è');
                            }
                        }
                    }
                });
            }

            addWelcomeSong() {
                const welcomeSong = {
                    id: 'bbadAgQphqY',
                    title: '‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á XINTOWN',
                    url: 'https://youtu.be/bbadAgQphqY?si=0JebRgPV5SbQcsm0',
                    isLocalFile: false
                };

                this.playlist = [welcomeSong];
                this.currentIndex = 0;
                this.updatePlaylistDisplay();
                this.updateCurrentSongDisplay();
            }

            extractVideoId(url) {
                const regex = /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/;
                const match = url.match(regex);
                return match ? match[1] : null;
            }

            async addSong() {
                const url = this.youtubeUrl.value.trim();
                if (!url) return;

                const videoId = this.extractVideoId(url);
                if (!videoId) {
                    alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå YouTube ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                    return;
                }

                const song = {
                    id: videoId,
                    title: `‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å YouTube - ${videoId}`,
                    url: url,
                    isLocalFile: false
                };

                this.playlist.push(song);

                if (this.playlist.length === 1 && this.currentIndex === -1) {
                    this.currentIndex = 0;
                    this.updateCurrentSongDisplay();
                    this.playSong(0);
                }

                this.updatePlaylistDisplay();
                this.youtubeUrl.value = '';
            }

            loadAndPlay(videoId) {
                if (!this.player || !this.isPlayerReady) return;

                this.stopAllPlayers();
                this.currentPlayerType = 'youtube';
                this.player.loadVideoById(videoId);
                this.player.setVolume(this.volume);
            }

            stopAllPlayers() {
                if (this.player && this.isPlayerReady) {
                    this.player.pauseVideo();
                }

                if (this.audioPlayer) {
                    this.audioPlayer.pause();
                }

                this.isPlaying = false;
                this.updatePlayButtons('‚ñ∂Ô∏è');
            }

            updatePlaylistDisplay() {
                if (this.playlist.length === 0) {
                    this.playlistElement.innerHTML = `
                        <div class="text-center text-gray-400 py-8">
                            <div class="text-4xl mb-2">üéµ</div>
                            <p>‡πÄ‡∏û‡∏•‡∏¢‡πå‡∏•‡∏¥‡∏™‡∏ï‡πå‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</p>
                            <p class="text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</p>
                        </div>
                    `;
                    this.playlistCount.textContent = '0';
                    return;
                }

                this.playlistElement.innerHTML = this.playlist.map((song, index) => `
                    <div class="flex items-center justify-between p-4 bg-gray-700 rounded-lg hover:bg-gray-600 transition-colors ${index === this.currentIndex ? 'ring-2 ring-blue-500 playing' : ''}">
                        <div class="flex items-center gap-3">
                            <span class="text-2xl">${index === this.currentIndex ? 'üéµ' : 'üé∂'}</span>
                            <div>
                                <div class="font-medium text-white">${song.title} ${index === 0 ? 'üîí' : ''}</div>
                                <div class="text-sm text-gray-400">${song.isLocalFile ? '‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á' : 'YouTube'} ${index === 0 ? '(‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)' : ''}</div>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="musicSystem.playSong(${index})" class="bg-blue-600 hover:bg-blue-700 px-3 py-1 rounded text-sm transition-colors">
                                ‡πÄ‡∏•‡πà‡∏ô
                            </button>
                            ${index === 0 ?
                        '<button class="bg-gray-500 cursor-not-allowed px-3 py-1 rounded text-sm opacity-50" disabled>üîí ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô</button>' :
                        `<button onclick="musicSystem.removeSong(${index})" class="bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm transition-colors">‡∏•‡∏ö</button>`
                    }
                        </div>
                    </div>
                `).join('');

                this.playlistCount.textContent = this.playlist.length;
            }

            updateCurrentSongDisplay() {
                if (this.currentIndex === -1 || !this.playlist[this.currentIndex]) {
                    this.currentSong.innerHTML = `
                        <div class="text-lg font-medium mb-2">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô</div>
                        <div class="text-sm text-gray-300">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á</div>
                    `;
                    return;
                }

                const current = this.playlist[this.currentIndex];
                this.currentSong.innerHTML = `
                    <div class="text-lg font-medium mb-2">${current.title}</div>
                    <div class="text-sm text-gray-300">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏à‡∏≤‡∏Å ${current.isLocalFile ? '‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á' : 'YouTube'}</div>
                `;
            }

            playSong(index) {
                if (index < 0 || index >= this.playlist.length) return;

                this.currentIndex = index;
                this.updateCurrentSongDisplay();
                this.updatePlaylistDisplay();

                const song = this.playlist[index];
                if (song.isLocalFile) {
                    this.playLocalAudio(song.url);
                } else {
                    if (this.isPlayerReady) {
                        this.loadAndPlay(song.id);
                    }
                }
            }

            removeSong(index) {
                if (index < 0 || index >= this.playlist.length) return;

                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏£‡∏Å)
                if (index === 0) {
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÑ‡∏î‡πâ');
                    return;
                }

                this.playlist.splice(index, 1);

                if (index === this.currentIndex) {
                    this.stopAllPlayers();
                    if (this.playlist.length === 0) {
                        this.currentIndex = -1;
                    } else if (index >= this.playlist.length) {
                        this.currentIndex = 0;
                        this.playSong(0);
                    } else {
                        this.playSong(index);
                    }
                } else if (index < this.currentIndex) {
                    this.currentIndex--;
                }

                this.updatePlaylistDisplay();
                this.updateCurrentSongDisplay();
            }

            setVolume(value) {
                this.volume = parseInt(value);

                document.getElementById('volumeDisplayModal').textContent = `${this.volume}%`;
                document.getElementById('volumeDisplayNav').textContent = `${this.volume}%`;

                this.volumeSlider.value = this.volume;
                document.getElementById('volumeSliderNav').value = this.volume;

                if (this.currentPlayerType === 'youtube' && this.player && this.isPlayerReady) {
                    this.player.setVolume(this.volume);
                } else if (this.currentPlayerType === 'audio' && this.audioPlayer) {
                    this.audioPlayer.volume = this.volume / 100;
                }
            }

            togglePlayPause() {
                if (this.currentIndex === -1) return;

                if (this.currentPlayerType === 'youtube' && this.player && this.isPlayerReady) {
                    if (this.isPlaying) {
                        this.player.pauseVideo();
                    } else {
                        this.player.playVideo();
                    }
                } else if (this.currentPlayerType === 'audio' && this.audioPlayer) {
                    if (this.isPlaying) {
                        this.audioPlayer.pause();
                    } else {
                        this.audioPlayer.play().catch(e => console.log('Cannot play audio:', e));
                    }
                }
            }

            previousSong() {
                if (this.playlist.length === 0) return;

                const newIndex = this.currentIndex > 0 ? this.currentIndex - 1 : this.playlist.length - 1;
                this.playSong(newIndex);
            }

            nextSong() {
                if (this.playlist.length === 0) return;

                if (this.currentIndex < this.playlist.length - 1) {
                    this.playSong(this.currentIndex + 1);
                } else if (this.loop) {
                    this.playSong(0);
                }
            }

            toggleAutoplay() {
                this.autoplay = !this.autoplay;
                this.updateAutoplayButton();
            }

            toggleLoop() {
                this.loop = !this.loop;
                this.updateLoopButton();
            }

            updateAutoplayButton() {
                const navBtn = document.getElementById('autoplayBtn');
                const modalBtn = document.getElementById('autoplayBtnModal');

                if (this.autoplay) {
                    navBtn.classList.add('bg-green-600/30');
                    navBtn.classList.remove('bg-gray-600/30');
                    modalBtn.classList.add('bg-green-600');
                    modalBtn.classList.remove('bg-gray-600');
                } else {
                    navBtn.classList.add('bg-gray-600/30');
                    navBtn.classList.remove('bg-green-600/30');
                    modalBtn.classList.add('bg-gray-600');
                    modalBtn.classList.remove('bg-green-600');
                }
            }

            updateLoopButton() {
                const navBtn = document.getElementById('loopBtn');
                const modalBtn = document.getElementById('loopBtnModal');

                if (this.loop) {
                    navBtn.classList.add('bg-blue-600/30');
                    navBtn.classList.remove('bg-gray-600/30');
                    modalBtn.classList.add('bg-blue-600');
                    modalBtn.classList.remove('bg-gray-600');
                } else {
                    navBtn.classList.add('bg-gray-600/30');
                    navBtn.classList.remove('bg-blue-600/30');
                    modalBtn.classList.add('bg-gray-600');
                    modalBtn.classList.remove('bg-blue-600');
                }
            }
        }

        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏û‡∏•‡∏á
        const musicSystem = new MusicSystem();



        function openMusicModal() {
            document.getElementById('musicModal').classList.remove('hidden');
            musicSystem.updateCurrentSongDisplay();
            musicSystem.updatePlaylistDisplay();
        }

        function closeMusicModal() {
            document.getElementById('musicModal').classList.add('hidden');
        }

        function clearMainPlaylist() {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? (‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏•‡∏ö)')) {
                musicSystem.stopAllPlayers();

                // ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (‡πÄ‡∏û‡∏•‡∏á‡πÅ‡∏£‡∏Å) ‡πÑ‡∏ß‡πâ
                const defaultSong = musicSystem.playlist[0];
                musicSystem.playlist = [defaultSong];
                musicSystem.currentIndex = 0;

                musicSystem.updatePlaylistDisplay();
                musicSystem.updateCurrentSongDisplay();
                musicSystem.playSong(0);
                alert('‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß (‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡∏≠‡∏¢‡∏π‡πà)');
            }
        }

        function showPage(pageId) {
            alert(`‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏ô‡πâ‡∏≤: ${pageId}`);
        }

        function goToHomePage() {
            alert('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å');
        }
    </script>
    <!-- Welcome Screen -->
    <div id="welcomeScreen"
        class="page-content min-h-screen flex items-center justify-center relative z-10 overflow-hidden">
        <!-- Enhanced Background Elements for Welcome Screen -->
        <div class="absolute inset-0 pointer-events-none">
            <!-- Large Floating Police Elements -->
            <div class="absolute top-20 left-10 text-9xl opacity-10 slow-float" style="animation-delay: 0s;">üöî</div>
            <div class="absolute top-32 right-16 text-7xl opacity-15 gentle-pulse" style="animation-delay: 1s;">‚öñÔ∏è</div>
            <div class="absolute bottom-20 left-20 text-8xl opacity-10 slow-float" style="animation-delay: 2s;">üèõÔ∏è
            </div>
            <div class="absolute bottom-32 right-12 text-6xl opacity-15 gentle-pulse" style="animation-delay: 3s;">üëÆ‚Äç‚ôÇÔ∏è
            </div>

            <!-- Animated Light Rays -->
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                <div class="w-96 h-96 border border-white/10 rounded-full animate-spin"
                    style="animation-duration: 20s;"></div>
                <div class="absolute top-8 left-8 w-80 h-80 border border-blue-300/20 rounded-full animate-spin"
                    style="animation-duration: 15s; animation-direction: reverse;"></div>
                <div class="absolute top-16 left-16 w-64 h-64 border border-purple-300/15 rounded-full animate-spin"
                    style="animation-duration: 25s;"></div>
            </div>

            <!-- Floating Particles -->
            <div class="absolute top-1/4 left-1/4 w-3 h-3 bg-blue-400/30 rounded-full animate-bounce"
                style="animation-delay: 0s; animation-duration: 3s;"></div>
            <div class="absolute top-3/4 right-1/4 w-2 h-2 bg-purple-400/40 rounded-full animate-bounce"
                style="animation-delay: 1s; animation-duration: 4s;"></div>
            <div class="absolute top-1/2 left-1/6 w-4 h-4 bg-white/20 rounded-full animate-bounce"
                style="animation-delay: 2s; animation-duration: 2.5s;"></div>
            <div class="absolute bottom-1/4 left-3/4 w-2 h-2 bg-blue-300/50 rounded-full animate-bounce"
                style="animation-delay: 3s; animation-duration: 3.5s;"></div>
        </div>

        <div class="text-center max-w-4xl mx-auto px-4 relative z-10">
            <!-- Enhanced Police Badge with Multiple Layers -->
            <div class="mb-12 relative">
                <!-- Outer Glow Ring -->
                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-48 h-48 border-4 border-blue-400/30 rounded-full animate-pulse glow-effect"
                    style="animation-duration: 2s;"></div>
                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-40 h-40 border-2 border-white/20 rounded-full animate-pulse"
                    style="animation-duration: 3s; animation-delay: 0.5s;"></div>

                <!-- Main Badge -->
                <div class="relative float-animation">
                    <div class="text-9xl mb-6 filter drop-shadow-2xl">üöî</div>

                    <!-- Animated Underline -->
                    <div class="flex justify-center space-x-2 mb-4">
                        <div class="w-8 h-1 bg-gradient-to-r from-transparent via-blue-400 to-transparent rounded-full animate-pulse glow-effect"
                            style="animation-delay: 0s;"></div>
                        <div class="w-12 h-1 bg-gradient-to-r from-blue-400 via-purple-500 to-blue-400 rounded-full animate-pulse glow-effect"
                            style="animation-delay: 0.5s;"></div>
                        <div class="w-8 h-1 bg-gradient-to-r from-transparent via-blue-400 to-transparent rounded-full animate-pulse glow-effect"
                            style="animation-delay: 1s;"></div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Title with Multiple Effects -->
            <div class="mb-8">
                <h1
                    class="text-7xl md:text-8xl font-bold bg-gradient-to-r from-white via-blue-200 via-purple-200 to-white bg-clip-text text-transparent mb-4 animate-pulse leading-tight filter drop-shadow-lg">
                    XINTOWN POLICE
                </h1>

                <!-- Subtitle -->
                <div class="text-xl md:text-2xl text-blue-200/80 font-medium mb-2 animate-pulse"
                    style="animation-delay: 0.5s;">
                    üèõÔ∏è ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö üèõÔ∏è
                </div>
            </div>

            <!-- Enhanced Enter Button with Multiple Layers -->
            <div class="relative">
                <!-- Button Glow Background -->
                <div
                    class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-20 bg-gradient-to-r from-blue-500/20 via-purple-500/30 to-blue-500/20 rounded-full blur-xl animate-pulse">
                </div>

                <!-- Main Button -->
                <button onclick="enterSystem()" id="enterSystemBtn"
                    class="group relative enhanced-btn bg-gradient-to-r from-blue-600 via-purple-600 via-pink-500 to-blue-700 hover:from-blue-700 hover:via-purple-700 hover:via-pink-600 hover:to-blue-800 text-white font-bold py-6 px-12 rounded-full text-2xl transition-all duration-500 transform hover:scale-110 hover:shadow-2xl hover:shadow-purple-500/50 animate-pulse border-2 border-white/20">
                    <!-- Button Inner Glow -->
                    <div
                        class="absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/10 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    </div>

                    <!-- Button Content -->
                    <span class="relative z-10 flex items-center justify-center">
                        <span class="mr-4 text-3xl animate-bounce">üö™</span>
                        <span class="tracking-wide">‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
                        <span
                            class="ml-4 group-hover:translate-x-3 transition-transform duration-300 text-3xl animate-bounce"
                            style="animation-delay: 0.5s;">‚Üí</span>
                    </span>

                    <!-- Hover Effect Overlay -->
                    <div
                        class="absolute inset-0 bg-gradient-to-r from-blue-400/20 via-purple-400/20 to-pink-400/20 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    </div>
                </button>

                <!-- Button Hint Text -->
                <div class="mt-6 text-blue-200/60 text-sm animate-pulse" style="animation-delay: 2s;">
                    ‚ú® ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‚ú®
                </div>
            </div>

            <!-- Feature Highlights -->
            <div class="mt-12 grid md:grid-cols-3 gap-6 text-center">
                <div class="bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10 animate-pulse"
                    style="animation-delay: 1s;">
                    <div class="text-3xl mb-2">üìã</div>
                    <div class="text-blue-200 font-medium">‡∏Å‡∏é‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô</div>
                </div>
                <div class="bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10 animate-pulse"
                    style="animation-delay: 1.5s;">
                    <div class="text-3xl mb-2">üßÆ</div>
                    <div class="text-blue-200 font-medium">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
                </div>
                <div class="bg-white/5 backdrop-blur-sm rounded-xl p-4 border border-white/10 animate-pulse"
                    style="animation-delay: 2s;">
                    <div class="text-3xl mb-2">‚ö°</div>
                    <div class="text-blue-200 font-medium">‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Container -->
    <div id="mainContent" class="container mx-auto px-4 py-8 relative z-10">
        <!-- Home Page -->
        <div id="homePage" class="page-content hidden">
            <!-- Hero Section -->
            <div class="text-center mb-16 relative">
                <!-- Animated Background Elements -->
                <div class="absolute inset-0 overflow-hidden pointer-events-none">
                    <div class="absolute top-10 left-10 w-20 h-20 bg-white/5 rounded-full animate-pulse glow-effect">
                    </div>
                    <div class="absolute top-32 right-20 w-16 h-16 bg-blue-300/10 rounded-full animate-bounce glow-effect"
                        style="animation-delay: 0.5s;"></div>
                    <div class="absolute bottom-20 left-1/4 w-12 h-12 bg-white/5 rounded-full animate-pulse glow-effect"
                        style="animation-delay: 1s;"></div>
                    <div class="absolute top-20 right-1/3 w-8 h-8 bg-blue-200/10 rounded-full animate-bounce glow-effect"
                        style="animation-delay: 1.5s;"></div>
                </div>

                <!-- Main Title with Gradient -->
                <div class="relative z-10">
                    <div class="inline-block mb-6">
                        <div class="text-8xl mb-4 float-animation">üöî</div>
                        <div
                            class="w-24 h-1 bg-gradient-to-r from-transparent via-white to-transparent mx-auto rounded-full animate-pulse glow-effect">
                        </div>
                    </div>

                    <h1
                        class="text-6xl md:text-7xl font-bold bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent mb-6 leading-tight">
                        XINTOWN POLICE
                    </h1>

                    <div class="max-w-2xl mx-auto">
                        <p class="text-blue-200/80 text-lg">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</p>
                    </div>
                </div>
            </div>

            <!-- Menu Cards Grid -->
            <div class="grid lg:grid-cols-3 gap-10 max-w-7xl mx-auto">
                <!-- Menu 1: ‡∏Å‡∏é‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® -->
                <div class="menu-card group bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 rounded-3xl shadow-2xl p-10 text-center cursor-pointer relative overflow-hidden border border-blue-200/30 backdrop-blur-sm"
                    onclick="openExternalLink('https://docs.google.com/spreadsheets/d/1C7pI2SagKgK7cdsiJzZvtRmtlBZRYpbdhWJsrvZW74Q/edit?gid=467740329#gid=467740329')">
                    <!-- Animated Background Elements -->
                    <div class="absolute inset-0 opacity-10">
                        <div class="absolute top-6 right-6 text-8xl animate-pulse">üìã</div>
                        <div class="absolute bottom-6 left-6 text-5xl animate-bounce" style="animation-delay: 0.5s;">‚öñÔ∏è
                        </div>
                        <div
                            class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-9xl opacity-5">
                            üèõÔ∏è</div>
                    </div>

                    <!-- Glowing Border Effect -->
                    <div
                        class="absolute inset-0 rounded-3xl bg-gradient-to-r from-blue-400/20 via-indigo-400/20 to-purple-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-sm">
                    </div>

                    <!-- Content -->
                    <div class="relative z-10">
                        <!-- Icon with enhanced animation -->
                        <div class="relative mb-8">
                            <div
                                class="text-8xl mb-4 group-hover:scale-125 transition-all duration-500 float-animation filter drop-shadow-lg">
                                üìã</div>
                            <div
                                class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            </div>
                        </div>

                        <h2
                            class="text-3xl font-bold bg-gradient-to-r from-slate-800 via-blue-700 to-indigo-800 bg-clip-text text-transparent mb-5 group-hover:from-blue-600 group-hover:via-indigo-600 group-hover:to-purple-600 transition-all duration-300">
                            ‡∏Å‡∏é‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</h2>

                        <p class="text-slate-600 mb-8 leading-relaxed text-lg font-medium">
                            ‡∏î‡∏π‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®<br>‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏ó‡∏µ‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</p>

                        <!-- Enhanced Action Button -->
                        <div
                            class="enhanced-btn bg-gradient-to-r from-blue-500 via-indigo-600 to-purple-600 hover:from-blue-600 hover:via-indigo-700 hover:to-purple-700 text-white px-8 py-4 rounded-2xl inline-block transition-all duration-300 shadow-xl group-hover:shadow-2xl hover:shadow-blue-500/40 transform group-hover:-translate-y-1">
                            <span class="text-base font-semibold flex items-center">
                                <span class="mr-3 text-xl">üìñ</span>
                                ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π
                                <span
                                    class="ml-3 group-hover:translate-x-2 transition-transform duration-300 text-xl">‚Üí</span>
                            </span>
                        </div>


                    </div>

                    <!-- Enhanced Hover Effect -->
                    <div
                        class="absolute inset-0 bg-gradient-to-br from-blue-500/10 via-indigo-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl">
                    </div>
                </div>

                <!-- Menu 2: ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö -->
                <div class="menu-card group bg-gradient-to-br from-emerald-50 via-green-50 to-teal-100 rounded-3xl shadow-2xl p-10 text-center cursor-pointer relative overflow-hidden border border-green-200/30 backdrop-blur-sm"
                    onclick="showPage('finePage')">
                    <!-- Animated Background Elements -->
                    <div class="absolute inset-0 opacity-10">
                        <div class="absolute top-6 right-6 text-8xl animate-pulse">üí∞</div>
                        <div class="absolute bottom-6 left-6 text-5xl animate-bounce" style="animation-delay: 0.7s;">üßÆ
                        </div>
                        <div
                            class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-9xl opacity-5">
                            üíé</div>
                    </div>

                    <!-- Glowing Border Effect -->
                    <div
                        class="absolute inset-0 rounded-3xl bg-gradient-to-r from-emerald-400/20 via-green-400/20 to-teal-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-sm">
                    </div>

                    <!-- Content -->
                    <div class="relative z-10">
                        <!-- Icon with enhanced animation -->
                        <div class="relative mb-8">
                            <div
                                class="text-8xl mb-4 group-hover:scale-125 transition-all duration-500 float-animation filter drop-shadow-lg">
                                üí∞</div>
                            <div
                                class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-emerald-400 to-green-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            </div>
                        </div>

                        <h2
                            class="text-3xl font-bold bg-gradient-to-r from-slate-800 via-emerald-700 to-green-800 bg-clip-text text-transparent mb-5 group-hover:from-emerald-600 group-hover:via-green-600 group-hover:to-teal-600 transition-all duration-300">
                            ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö</h2>

                        <p class="text-slate-600 mb-8 leading-relaxed text-lg font-medium">
                            ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å<br>‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>

                        <!-- Enhanced Action Button -->
                        <div
                            class="enhanced-btn bg-gradient-to-r from-emerald-500 via-green-600 to-teal-600 hover:from-emerald-600 hover:via-green-700 hover:to-teal-700 text-white px-8 py-4 rounded-2xl inline-block transition-all duration-300 shadow-xl group-hover:shadow-2xl hover:shadow-emerald-500/40 transform group-hover:-translate-y-1">
                            <span class="text-base font-semibold flex items-center">
                                <span class="mr-3 text-xl">üöÄ</span>
                                ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                                <span
                                    class="ml-3 group-hover:translate-x-2 transition-transform duration-300 text-xl">‚Üí</span>
                            </span>
                        </div>


                    </div>

                    <!-- Enhanced Hover Effect -->
                    <div
                        class="absolute inset-0 bg-gradient-to-br from-emerald-500/10 via-green-500/10 to-teal-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl">
                    </div>
                </div>

                <!-- Menu 3: ‡∏Å‡∏é‡∏ï‡∏≥‡∏£‡∏ß‡∏à -->
                <div class="menu-card group bg-gradient-to-br from-purple-50 via-pink-50 to-rose-100 rounded-3xl shadow-2xl p-10 text-center cursor-pointer relative overflow-hidden border border-purple-200/30 backdrop-blur-sm"
                    onclick="openExternalLink('https://docs.google.com/spreadsheets/d/1pn4xMhuGm7IwTWLBw1t1mHRyHbO9h21eLqsn-1xdFJo/edit?gid=0#gid=0')">
                    <!-- Animated Background Elements -->
                    <div class="absolute inset-0 opacity-10">
                        <div class="absolute top-6 right-6 text-8xl animate-pulse">üëÆ‚Äç‚ôÇÔ∏è</div>
                        <div class="absolute bottom-6 left-6 text-5xl animate-bounce" style="animation-delay: 1s;">üõ°Ô∏è
                        </div>
                        <div
                            class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-9xl opacity-5">
                            üöî</div>
                    </div>

                    <!-- Glowing Border Effect -->
                    <div
                        class="absolute inset-0 rounded-3xl bg-gradient-to-r from-purple-400/20 via-pink-400/20 to-rose-400/20 opacity-0 group-hover:opacity-100 transition-opacity duration-500 blur-sm">
                    </div>

                    <!-- Content -->
                    <div class="relative z-10">
                        <!-- Icon with enhanced animation -->
                        <div class="relative mb-8">
                            <div
                                class="text-8xl mb-4 group-hover:scale-125 transition-all duration-500 float-animation filter drop-shadow-lg">
                                üëÆ‚Äç‚ôÇÔ∏è</div>
                            <div
                                class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            </div>
                        </div>

                        <h2
                            class="text-3xl font-bold bg-gradient-to-r from-slate-800 via-purple-700 to-pink-800 bg-clip-text text-transparent mb-5 group-hover:from-purple-600 group-hover:via-pink-600 group-hover:to-rose-600 transition-all duration-300">
                            ‡∏Å‡∏é‡∏ï‡∏≥‡∏£‡∏ß‡∏à</h2>

                        <p class="text-slate-600 mb-8 leading-relaxed text-lg font-medium">
                            ‡∏Å‡∏é‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ï‡∏≥‡∏£‡∏ß‡∏à<br>‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô</p>

                        <!-- Enhanced Action Button -->
                        <div
                            class="enhanced-btn bg-gradient-to-r from-purple-500 via-pink-600 to-rose-600 hover:from-purple-600 hover:via-pink-700 hover:to-rose-700 text-white px-8 py-4 rounded-2xl inline-block transition-all duration-300 shadow-xl group-hover:shadow-2xl hover:shadow-purple-500/40 transform group-hover:-translate-y-1">
                            <span class="text-base font-semibold flex items-center">
                                <span class="mr-3 text-xl">üëÅÔ∏è</span>
                                ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π
                                <span
                                    class="ml-3 group-hover:translate-x-2 transition-transform duration-300 text-xl">‚Üí</span>
                            </span>
                        </div>


                    </div>

                    <!-- Enhanced Hover Effect -->
                    <div
                        class="absolute inset-0 bg-gradient-to-br from-purple-500/10 via-pink-500/10 to-rose-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl">
                    </div>
                </div>
            </div>
        </div>

        <!-- Fine Calculation Page -->
        <div id="finePage" class="page-content hidden">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white mb-2 float-animation">üí∞ XINTOWN POLICE -
                    ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å </h1>
            </div>

            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Left Panel - Charges Selection -->
                <div class="bg-white rounded-xl shadow-2xl p-6 glow-effect">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        ‚öñÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏´‡∏≤
                    </h2>

                    <!-- Search Box -->
                    <div class="mb-4">
                        <div class="relative">
                            <input type="text" id="searchInput"
                                placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏´‡∏≤... (‡πÄ‡∏ä‡πà‡∏ô ‡∏´‡∏•‡∏ö‡∏´‡∏ô‡∏µ, ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á, ‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢)"
                                class="w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all glow-effect">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <span class="text-gray-400">üîç</span>
                            </div>
                            <button id="clearSearch"
                                class="absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 hidden">
                                <span class="text-lg">‚úï</span>
                            </button>
                        </div>
                        <div id="searchResults" class="mt-2 text-sm text-gray-600 hidden">
                            <span id="searchCount">0</span> ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏û‡∏ö
                        </div>
                    </div>

                    <!-- Category Tabs -->
                    <div class="flex space-x-2 mb-4 border-b">
                        <button
                            class="category-tab active px-4 py-2 font-medium text-blue-600 border-b-2 border-blue-600 enhanced-btn"
                            data-category="general">
                            ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥
                        </button>
                        <button
                            class="category-tab px-4 py-2 font-medium text-gray-600 hover:text-blue-600 enhanced-btn"
                            data-category="illegal">
                            ‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢
                        </button>
                        <button
                            class="category-tab px-4 py-2 font-medium text-gray-600 hover:text-blue-600 enhanced-btn"
                            data-category="serious">
                            ‡∏Ñ‡∏î‡∏µ‡πÅ‡∏î‡∏á
                        </button>
                    </div>

                    <!-- Charges List -->
                    <div id="chargesList" class="space-y-2 max-h-96 overflow-y-auto">
                        <!-- General Charges -->
                        <div class="category-content" data-category="general">
                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('fight', 10000, 10)" data-charge="fight" data-fine="10000"
                                data-jail="10" data-keywords="‡∏ó‡∏∞‡πÄ‡∏•‡∏≤‡∏∞ ‡∏ß‡∏¥‡∏ß‡∏≤‡∏ó ‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ ‡∏ä‡∏Å">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">ü•ä ‡∏ó‡∏∞‡πÄ‡∏•‡∏≤‡∏∞‡∏ß‡∏¥‡∏ß‡∏≤‡∏ó</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•‡∏≤‡∏∞‡∏ß‡∏¥‡∏ß‡∏≤‡∏ó‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">10,000 XC</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('disturbance', 5000, 5)" data-charge="disturbance"
                                data-fine="5000" data-jail="5" data-keywords="‡∏ß‡∏∏‡πà‡∏ô‡∏ß‡∏≤‡∏¢ ‡∏£‡∏ö‡∏Å‡∏ß‡∏ô ‡∏™‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üîä ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡∏∏‡πà‡∏ô‡∏ß‡∏≤‡∏¢ ‡∏ó‡∏∏‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ó‡∏µ‡πà‡∏Å‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡∏∏‡πà‡∏ô‡∏ß‡∏≤‡∏¢‡πÉ‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏°</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">5,000 XC</div>
                                        <div class="text-orange-600">5 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>



                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('mask', 3000, 5)" data-charge="mask" data-fine="3000"
                                data-jail="5" data-keywords="‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å ‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏á ‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üé≠ ‡πÉ‡∏™‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏á‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏á‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">3,000 XC</div>
                                        <div class="text-orange-600">5 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('assault', 20000, 10)" data-charge="assault" data-fine="20000"
                                data-jail="10" data-keywords="‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢ ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ ‡πÄ‡∏à‡∏ï‡∏ô‡∏≤ ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üëä ‡πÄ‡∏à‡∏ï‡∏ô‡∏≤‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ - ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡∏ï‡∏ô‡∏≤</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">20,000 XC</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('suit', 20000, 5)" data-charge="suit" data-fine="20000"
                                data-jail="5" data-keywords="‡πÅ‡∏Å‡πä‡∏á‡πÑ‡∏°‡πà ‡πÉ‡∏™‡πà‡∏™‡∏π‡∏ó ‡πÅ‡∏™‡∏î‡∏á ‡∏ï‡∏±‡∏ß‡∏ï‡∏ô">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">ü©≥ ‡πÅ‡∏Å‡πä‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏™‡∏π‡∏ó‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏ô</h4>
                                        <p class="text-sm text-gray-600">‡πÅ‡∏Å‡πä‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏™‡∏π‡∏ó‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏ô</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">20,000 XC</div>
                                        <div class="text-orange-600">5 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('pain', 50000, 15)" data-charge="pain" data-fine="50000"
                                data-jail="15" data-keywords="‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô ‡∏û‡∏Å‡πÄ‡∏û‡∏ô">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üíä‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏û‡∏Å‡πÄ‡∏û‡∏ô</h4>
                                        <p class="text-sm text-gray-600">‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏û‡∏Å‡πÄ‡∏û‡∏ô</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">20,000 XC</div>
                                        <div class="text-orange-600">5 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('kidnap', 10000, 10)" data-charge="kidnap" data-fine="10000"
                                data-jail="10" data-keywords="‡∏•‡∏±‡∏Å‡∏û‡∏≤‡∏ï‡∏±‡∏ß ‡∏à‡∏±‡∏ö‡∏ï‡∏±‡∏ß ‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üë• ‡∏•‡∏±‡∏Å‡∏û‡∏≤‡∏ï‡∏±‡∏ß</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏õ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">10,000 XC</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-yellow-50 hover:bg-yellow-100 p-3 rounded-lg cursor-pointer border border-yellow-200 transition-all enhanced-btn"
                                onclick="toggleCharge('outOfCity', 0, 0)" data-charge="outOfCity" data-fine="0"
                                data-jail="0" data-special="X2 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ" data-keywords="‡∏≠‡∏≠‡∏Å‡∏ô‡∏≠‡∏Å‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏ô‡∏≠‡∏Å‡πÄ‡∏Ç‡∏ï">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üèôÔ∏è ‡∏≠‡∏≠‡∏Å‡∏ô‡∏≠‡∏Å‡πÄ‡∏°‡∏∑‡∏≠‡∏á</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏ô‡∏≠‡∏Å‡πÄ‡∏Ç‡∏ï‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-purple-600 font-bold">X2 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ</div>
                                        <div class="text-orange-600">- ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-yellow-50 hover:bg-yellow-100 p-3 rounded-lg cursor-pointer border border-yellow-200 transition-all enhanced-btn"
                                onclick="toggleCharge('conspiracy', 0, 0)" data-charge="conspiracy" data-fine="0"
                                data-jail="0" data-special="‡∏ï‡∏≤‡∏°‡∏Ñ‡∏î‡∏µ‡∏´‡∏•‡∏±‡∏Å" data-keywords="‡∏™‡∏°‡∏£‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Ñ‡∏¥‡∏î ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô ‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">ü§ù ‡∏™‡∏°‡∏£‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Ñ‡∏¥‡∏î/‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-purple-600 font-bold">‡∏ï‡∏≤‡∏°‡∏Ñ‡∏î‡∏µ‡∏´‡∏•‡∏±‡∏Å</div>
                                        <div class="text-orange-600">- ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('showWeapon', 5000, 0)" data-charge="showWeapon" data-fine="5000"
                                data-jail="0" data-keywords="‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò ‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò ‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üî´ ‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-blue-600 font-bold">5,000 XC</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('riskArea', 2000, 3)" data-charge="riskArea" data-fine="2000"
                                data-jail="3" data-keywords="‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">‚ö†Ô∏è ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">2,000 XC</div>
                                        <div class="text-orange-600">3 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('escapeArrest', 3000, 5)" data-charge="escapeArrest"
                                data-fine="3000" data-jail="5" data-keywords="‡∏´‡∏•‡∏ö‡∏´‡∏ô‡∏µ ‡∏à‡∏±‡∏ö‡∏Å‡∏∏‡∏° ‡∏´‡∏ô‡∏µ‡∏ï‡∏≥‡∏£‡∏ß‡∏à">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üèÉ‚Äç‚ôÇÔ∏è ‡∏´‡∏•‡∏ö‡∏´‡∏ô‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Å‡∏∏‡∏°</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏ö‡∏´‡∏ô‡∏µ‡∏à‡∏≤‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">3,000 XC</div>
                                        <div class="text-orange-600">5 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('distribute', 8000, 5)" data-charge="distribute" data-fine="8000"
                                data-jail="5" data-keywords="‡∏¢‡∏±‡∏î‡πÄ‡∏¢‡∏µ‡∏¢‡∏î ‡πÅ‡∏à‡∏Å‡∏à‡πà‡∏≤‡∏¢ ‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üéÅ ‡∏¢‡∏±‡∏î‡πÄ‡∏¢‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡∏Å‡∏à‡πà‡∏≤‡∏¢‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">8,000 XC</div>
                                        <div class="text-orange-600">5 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('vehicleTheft', 10000, 10)" data-charge="vehicleTheft"
                                data-fine="10000" data-jail="10" data-keywords="‡πÇ‡∏à‡∏£‡∏Å‡∏£‡∏£‡∏° ‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞ ‡∏Ç‡πÇ‡∏°‡∏¢‡∏£‡∏ñ ‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏ã‡∏Ñ‡πå">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üöô ‡πÇ‡∏à‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏Ç‡πÇ‡∏°‡∏¢‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏ã‡∏Ñ‡πå</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">10,000 XC</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('embezzlement', 15000, 20)" data-charge="embezzlement"
                                data-fine="15000" data-jail="20" data-keywords="‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô ‡πÄ‡∏á‡∏¥‡∏ô">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üí∏ ‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">15,000 XC</div>
                                        <div class="text-orange-600">20 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('vandalism', 5000, 5)" data-charge="vandalism" data-fine="5000"
                                data-jail="5" data-keywords="‡∏ó‡∏≥‡∏•‡∏≤‡∏¢ ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô ‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üí• ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">5,000 XC</div>
                                        <div class="text-orange-600">5 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('trespassing', 50000, 15)" data-charge="trespassing"
                                data-fine="50000" data-jail="15" data-keywords="‡∏ö‡∏∏‡∏Å‡∏£‡∏∏‡∏Å ‡πÄ‡∏Ñ‡∏´‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô ‡∏ö‡πâ‡∏≤‡∏ô ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üè† ‡∏ö‡∏∏‡∏Å‡∏£‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏´‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô / ‡∏ö‡∏∏‡∏Å‡∏£‡∏∏‡∏Å‡∏ö‡πâ‡∏≤‡∏ô</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏ö‡∏∏‡∏Å‡∏£‡∏∏‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">50,000 XC</div>
                                        <div class="text-orange-600">15 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg cursor-pointer border transition-all enhanced-btn"
                                onclick="toggleCharge('showIllegal', 5000, 8)" data-charge="showIllegal"
                                data-fine="5000" data-jail="8" data-keywords="‡πÇ‡∏ä‡∏ß‡πå ‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏î‡∏≥ ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‡πÅ‡∏™‡∏î‡∏á ‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üëÅÔ∏è ‡πÇ‡∏ä‡∏ß‡πå‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏î‡∏≥‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">5,000 XC</div>
                                        <div class="text-orange-600">8 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-yellow-50 hover:bg-yellow-100 p-3 rounded-lg cursor-pointer border border-yellow-200 transition-all enhanced-btn"
                                onclick="toggleCharge('darkCar', 0, 0)" data-charge="darkCar" data-fine="0"
                                data-jail="0" data-special="X4 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ(‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö)" data-keywords="‡∏£‡∏ñ‡∏ó‡∏∂‡∏ö ‡∏á‡∏≤‡∏ô‡∏î‡∏≥ ‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ó‡∏∂‡∏ö">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üöô ‡∏ô‡∏≥‡∏£‡∏ñ‡∏ó‡∏∂‡∏ö‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏≥</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ó‡∏∂‡∏ö‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ú‡∏¥‡∏î</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-purple-600 font-bold">X4 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ</div>
                                        <div class="text-orange-600">- ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-yellow-50 hover:bg-yellow-100 p-3 rounded-lg cursor-pointer border border-yellow-200 transition-all enhanced-btn"
                                onclick="toggleCharge('mountain', 0, 0)" data-charge="mountain" data-fine="0"
                                data-jail="0" data-special="X4 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ(‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö)" data-keywords="‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏Ç‡∏≤ ‡πÄ‡∏Ç‡∏≤ ‡∏†‡∏π‡πÄ‡∏Ç‡∏≤">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">‚õ∞Ô∏è ‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏Ç‡∏≤</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏ö‡∏ô‡πÄ‡∏Ç‡∏≤‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-purple-600 font-bold">X4 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ</div>
                                        <div class="text-orange-600">- ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-yellow-50 hover:bg-yellow-100 p-3 rounded-lg cursor-pointer border border-yellow-200 transition-all enhanced-btn"
                                onclick="toggleCharge('beforeServerReset', 0, 0)" data-charge="beforeServerReset"
                                data-fine="0" data-jail="0" data-special="X10 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ(‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö)"
                                data-keywords="‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏≥ ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á ‡πÄ‡∏ã‡∏¥‡∏ü‡∏£‡∏µ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üîÑ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏ü‡∏£‡∏µ 10 ‡∏ô‡∏≤‡∏ó‡∏µ</h4>
                                        <p class="text-sm text-gray-600">‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏≥‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-purple-600 font-bold">X10 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ</div>
                                        <div class="text-orange-600">- ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Illegal Items -->
                        <div class="category-content hidden" data-category="illegal">
                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg border transition-all enhanced-btn"
                                data-charge="cement" data-fine="2000" data-jail="3" data-keywords="‡∏õ‡∏π‡∏ô ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á">
                                <div class="flex justify-between items-center mb-2">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üèóÔ∏è ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡∏õ‡∏π‡∏ô</h4>
                                        <p class="text-sm text-gray-600">‡∏°‡∏µ‡∏õ‡∏π‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">2,000 XC/‡∏ä‡∏¥‡πâ‡∏ô</div>
                                        <div class="text-orange-600">3 ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏ä‡∏¥‡πâ‡∏ô</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <label class="text-sm text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</label>
                                    <input type="number" min="1" value="1"
                                        class="quantity-input w-16 px-2 py-1 border border-gray-300 rounded text-sm"
                                        data-charge="cement">
                                    <button onclick="handleIllegalChargeButton('cement')"
                                        class="enhanced-btn bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg border transition-all enhanced-btn"
                                data-charge="wire" data-fine="2000" data-jail="3" data-keywords="‡∏™‡∏≤‡∏¢‡πÑ‡∏ü ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á">
                                <div class="flex justify-between items-center mb-2">
                                    <div>
                                        <h4 class="font-medium text-gray-800">‚ö° ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏¢‡πÑ‡∏ü</h4>
                                        <p class="text-sm text-gray-600">‡∏°‡∏µ‡∏™‡∏≤‡∏¢‡πÑ‡∏ü‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">2,000 XC/‡∏ä‡∏¥‡πâ‡∏ô</div>
                                        <div class="text-orange-600">3 ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏ä‡∏¥‡πâ‡∏ô</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <label class="text-sm text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</label>
                                    <input type="number" min="1" value="1"
                                        class="quantity-input w-16 px-2 py-1 border border-gray-300 rounded text-sm"
                                        data-charge="wire">
                                    <button onclick="handleIllegalChargeButton('wire')"
                                        class="enhanced-btn bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg border transition-all enhanced-btn"
                                data-charge="illegalMoney" data-fine="0" data-jail="5" data-special="‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏î‡∏á X2"
                                data-keywords="‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏î‡∏á ‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á">
                                <div class="flex justify-between items-center mb-2">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üí∏ ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</h4>
                                        <p class="text-sm text-gray-600">‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤‡πÇ‡∏î‡∏¢‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-purple-600 font-bold">‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏î‡∏á X2</div>
                                        <div class="text-orange-600">5 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <label class="text-sm text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏î‡∏á:</label>
                                    <input type="number" min="1" value="1"
                                        class="quantity-input w-20 px-2 py-1 border border-gray-300 rounded text-sm"
                                        data-charge="illegalMoney">
                                    <button onclick="handleIllegalChargeButton('illegalMoney')"
                                        class="enhanced-btn bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg border transition-all enhanced-btn"
                                data-charge="capsules" data-fine="3000" data-jail="5"
                                data-keywords="capsule blue red green ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á">
                                <div class="flex justify-between items-center mb-2">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üíä ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á Capsule Blue, Red, Green</h4>
                                        <p class="text-sm text-gray-600">‡∏°‡∏µ Capsule ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">3,000 XC/‡∏ä‡∏¥‡πâ‡∏ô</div>
                                        <div class="text-orange-600">5 ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏ä‡∏¥‡πâ‡∏ô</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <label class="text-sm text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</label>
                                    <input type="number" min="1" value="1"
                                        class="quantity-input w-16 px-2 py-1 border border-gray-300 rounded text-sm"
                                        data-charge="capsules">
                                    <button onclick="handleIllegalChargeButton('capsules')"
                                        class="enhanced-btn bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                                </div>
                            </div>

                            <div class="charge-item bg-gray-50 hover:bg-blue-50 p-3 rounded-lg border transition-all enhanced-btn"
                                data-charge="lockpick" data-fine="5000" data-jail="10"
                                data-keywords="lockpick ‡∏á‡∏±‡∏î‡πÅ‡∏á‡∏∞ ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á">
                                <div class="flex justify-between items-center mb-2">
                                    <div>
                                        <h4 class="font-medium text-gray-800">üîì ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á Lockpick</h4>
                                        <p class="text-sm text-gray-600">‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏á‡∏±‡∏î‡πÅ‡∏á‡∏∞‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">5,000 XC/‡∏ä‡∏¥‡πâ‡∏ô</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏ä‡∏¥‡πâ‡∏ô</div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <label class="text-sm text-gray-700">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</label>
                                    <input type="number" min="1" value="1"
                                        class="quantity-input w-16 px-2 py-1 border border-gray-300 rounded text-sm"
                                        data-charge="lockpick">
                                    <button onclick="handleIllegalChargeButton('lockpick')"
                                        class="enhanced-btn bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                                </div>
                            </div>


                        </div>

                        <!-- Serious Crimes -->
                        <div class="category-content hidden" data-category="serious">
                            <div class="charge-item bg-red-50 hover:bg-red-100 p-3 rounded-lg cursor-pointer border border-red-200 transition-all enhanced-btn"
                                onclick="toggleCharge('noCooperation', 30000, 10)" data-charge="noCooperation"
                                data-fine="30000" data-jail="10"
                                data-keywords="‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠ ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‡πÑ‡∏°‡πà‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-red-800">‚ùå ‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</h4>
                                        <p class="text-sm text-red-600">‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡∏ö‡∏™‡∏ß‡∏ô</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">30,000 XC</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-red-50 hover:bg-red-100 p-3 rounded-lg cursor-pointer border border-red-200 transition-all enhanced-btn"
                                onclick="toggleCharge('stealGovCar', 70000, 20)" data-charge="stealGovCar"
                                data-fine="70000" data-jail="20" data-keywords="‡∏Ç‡πÇ‡∏°‡∏¢‡∏£‡∏ñ ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‡∏£‡∏ñ‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-red-800">üö® ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ç‡πÇ‡∏°‡∏¢‡∏£‡∏ñ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</h4>
                                        <p class="text-sm text-red-600">‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ç‡πÇ‡∏°‡∏¢‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">70,000 XC</div>
                                        <div class="text-orange-600">20 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-red-50 hover:bg-red-100 p-3 rounded-lg cursor-pointer border border-red-200 transition-all enhanced-btn"
                                onclick="toggleCharge('disturbOfficer', 120000, 10)" data-charge="disturbOfficer"
                                data-fine="120000" data-jail="10" data-keywords="‡∏Å‡πà‡∏≠‡∏Å‡∏ß‡∏ô ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‡∏Ç‡∏±‡∏î‡∏Ç‡∏ß‡∏≤‡∏á">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-red-800">üöß ‡∏Å‡πà‡∏≠‡∏Å‡∏ß‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</h4>
                                        <p class="text-sm text-red-600">‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏Å‡∏ß‡∏ô‡∏Ç‡∏±‡∏î‡∏Ç‡∏ß‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">120,000 XC</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>



                            <div class="charge-item bg-red-50 hover:bg-red-100 p-3 rounded-lg cursor-pointer border border-red-200 transition-all enhanced-btn"
                                onclick="toggleCharge('disturbGovArea', 80000, 10)" data-charge="disturbGovArea"
                                data-fine="80000" data-jail="10" data-keywords="‡∏Å‡πà‡∏≠‡πÄ‡∏´‡∏ï‡∏∏ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£ ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-red-800">üèõÔ∏è ‡∏Å‡πà‡∏≠‡πÄ‡∏´‡∏ï‡∏∏‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</h4>
                                        <p class="text-sm text-red-600">‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏ô‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">80,000 XC</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-red-50 hover:bg-red-100 p-3 rounded-lg cursor-pointer border border-red-200 transition-all enhanced-btn"
                                onclick="toggleCharge('impersonateOfficer', 80000, 15)" data-charge="impersonateOfficer"
                                data-fine="80000" data-jail="15"
                                data-keywords="‡πÅ‡∏≠‡∏ö‡∏≠‡πâ‡∏≤‡∏á ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô ‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏¢ ‡∏õ‡∏•‡∏≠‡∏°‡πÅ‡∏õ‡∏•‡∏á ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-red-800">ü•∏
                                            ‡πÅ‡∏≠‡∏ö‡∏≠‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô</h4>
                                        <p class="text-sm text-red-600">‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏≠‡∏°‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">80,000 XC</div>
                                        <div class="text-orange-600">15 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-red-50 hover:bg-red-100 p-3 rounded-lg cursor-pointer border border-red-200 transition-all enhanced-btn"
                                onclick="toggleCharge('falseReport', 20000, 10)" data-charge="falseReport"
                                data-fine="20000" data-jail="10" data-keywords="‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ó‡πá‡∏à ‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡πá‡∏à ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡πá‡∏à">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-red-800">üó£Ô∏è ‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ó‡πá‡∏à ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡πá‡∏à</h4>
                                        <p class="text-sm text-red-600">‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡πá‡∏à‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">20,000 XC</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-red-50 hover:bg-red-100 p-3 rounded-lg cursor-pointer border border-red-200 transition-all enhanced-btn"
                                onclick="toggleCharge('assaultOfficer', 100000, 30)" data-charge="assaultOfficer"
                                data-fine="100000" data-jail="30" data-keywords="‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢ ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà ‡∏£‡∏±‡∏ê">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-red-800">ü§ú ‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà</h4>
                                        <p class="text-sm text-red-600">‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ê</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">100,000 XC</div>
                                        <div class="text-orange-600">30 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-red-50 hover:bg-red-100 p-3 rounded-lg cursor-pointer border border-red-200 transition-all enhanced-btn"
                                onclick="toggleCharge('intentAssaultOfficer', 20000, 10)"
                                data-charge="intentAssaultOfficer" data-fine="20000" data-jail="10"
                                data-keywords="‡πÄ‡∏à‡∏ï‡∏ô‡∏≤ ‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢ ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-red-800">üí¢ ‡πÄ‡∏à‡∏ï‡∏ô‡∏≤‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</h4>
                                        <p class="text-sm text-red-600">‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡∏ï‡∏ô‡∏≤</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">20,000 XC</div>
                                        <div class="text-orange-600">10 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>

                            <div class="charge-item bg-red-50 hover:bg-red-100 p-3 rounded-lg cursor-pointer border border-red-200 transition-all enhanced-btn"
                                onclick="toggleCharge('embezzlementRed', 15000, 20)" data-charge="embezzlementRed"
                                data-fine="15000" data-jail="20" data-keywords="‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå ‡πÄ‡∏á‡∏¥‡∏ô">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h4 class="font-medium text-red-800">üí∏ ‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå</h4>
                                        <p class="text-sm text-red-600">‡∏Å‡∏≤‡∏£‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô</p>
                                    </div>
                                    <div class="text-right text-sm">
                                        <div class="text-red-600 font-bold">15,000 XC</div>
                                        <div class="text-orange-600">20 ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Panel - Results -->
                <div class="bg-white rounded-xl shadow-2xl p-6 glow-effect">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                        üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
                    </h2>

                    <!-- Selected Charges -->
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-gray-700 mb-3">‡∏Ç‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</h3>
                        <div id="selectedCharges"
                            class="space-y-2 min-h-[60px] bg-gray-50 rounded-lg p-4 max-h-40 overflow-y-auto">
                            <p class="text-gray-500 italic">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏´‡∏≤</p>
                        </div>
                    </div>

                    <!-- Special Modifiers Alert -->
                    <div id="specialAlert" class="hidden mb-4 bg-orange-100 border-l-4 border-orange-500 p-4 rounded">
                        <p class="text-orange-700 font-medium">‚ö†Ô∏è ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏´‡∏≤‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</p>
                    </div>

                    <!-- Instruction when no calculation -->
                    <div id="noCalculation" class="text-center py-8 text-gray-500">
                        <div class="text-6xl mb-4 float-animation">üßÆ</div>
                        <p class="text-lg font-medium">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</p>
                        <p class="text-sm">‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å</p>
                    </div>

                    <!-- Calculation Results (Hidden initially) -->
                    <div id="calculationResults" class="hidden">
                        <!-- Summary -->
                        <div class="grid grid-cols-2 gap-4 mb-6">
                            <div class="bg-red-50 rounded-lg p-4 border-l-4 border-red-500 glow-effect">
                                <h4 class="font-semibold text-red-700">‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏ß‡∏°</h4>
                                <p id="totalFine" class="text-2xl font-bold text-red-600">0 XinCoin</p>
                            </div>
                            <div class="bg-orange-50 rounded-lg p-4 border-l-4 border-orange-500 glow-effect">
                                <h4 class="font-semibold text-orange-700">‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å‡∏£‡∏ß‡∏°</h4>
                                <p id="totalJail" class="text-2xl font-bold text-orange-600">0 ‡∏ô‡∏≤‡∏ó‡∏µ</p>
                                <div id="redCaseJailInfo" class="hidden mt-2 text-sm text-red-600 font-medium">
                                    <span id="redCaseJailText"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Bail Calculation -->
                        <div class="bg-green-50 rounded-lg p-4 border-l-4 border-green-500 mb-6 glow-effect">
                            <h4 class="font-semibold text-green-700 mb-2">‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ï‡∏±‡∏ß</h4>
                            <p class="text-sm text-gray-600 mb-2">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å (‡∏ô‡∏≤‡∏ó‡∏µ √ó 2,000 XinCoin)</p>
                            <p id="bailAmount" class="text-2xl font-bold text-green-600">0 XinCoin</p>
                        </div>

                        <!-- Total with Bail -->
                        <div class="bg-purple-50 rounded-lg p-4 border-l-4 border-purple-500 mb-6 glow-effect">
                            <h4 class="font-semibold text-purple-700 mb-2">üí∞ ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô</h4>
                            <p class="text-sm text-gray-600 mb-2">‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö + ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ï‡∏±‡∏ß</p>
                            <p id="totalWithBail" class="text-3xl font-bold text-purple-600">0 XinCoin</p>
                            <div id="redCaseJailInfoTotal" class="hidden mt-2 text-sm text-red-600 font-medium">
                                <span id="redCaseJailTextTotal"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex space-x-2">
                        <button onclick="calculateCharges()" id="calculateBtn"
                            class="enhanced-btn flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors text-sm shadow-lg hover:shadow-blue-500/50">
                            üìä ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
                        </button>
                        <button onclick="clearAllCharges()" id="clearBtn"
                            class="enhanced-btn bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors text-sm shadow-lg">
                            üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á
                        </button>
                    </div>

                    <!-- Copy Button (shown after calculation) -->
                    <div id="copyButtonContainer" class="hidden mt-3">
                        <button onclick="copyCharges()" id="copyChargesBtn"
                            class="enhanced-btn w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-3 px-4 rounded-lg transition-colors text-sm shadow-lg hover:shadow-purple-500/50">
                            üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏´‡∏≤
                        </button>
                    </div>
                </div>
            </div>

            <!-- Info Card -->
            <div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg glow-effect">
                <div class="flex">
                    <div class="flex-shrink-0">
                        <span class="text-2xl float-animation">üí°</span>
                    </div>
                    <div class="ml-3">
                        <p class="text-sm text-yellow-700">
                            <strong>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏Å‡∏±‡∏ô‡∏ï‡∏±‡∏ß = ‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å √ó 2,000 XinCoin/‡∏ô‡∏≤‡∏ó‡∏µ
                        </p>
                    </div>
                </div>
            </div>
            <!-- Back Button -->
            <div class="text-center mt-8">
                <button onclick="showPage('homePage')"
                    class="enhanced-btn bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg transition-colors backdrop-blur-md shadow-lg hover:shadow-white/20">
                    ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                </button>
            </div>
        </div>

        <!-- Shift Summary Page -->
        <div id="shiftSummaryPage" class="page-content hidden">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white mb-2 float-animation">‚è∞ XINTOWN POLICE - ‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡∏£</h1>
            </div>

            <div class="max-w-2xl mx-auto">
                <!-- Time Calculator Card -->
                <div class="bg-white rounded-xl shadow-2xl p-8 glow-effect">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center justify-center">
                        üïê ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡∏£
                    </h2>

                    <!-- Time Input Section -->
                    <div class="grid md:grid-cols-2 gap-6 mb-6">
                        <!-- Start Time -->
                        <div class="bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500">
                            <label class="block text-sm font-semibold text-blue-700 mb-2">
                                üü¢ ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)
                            </label>
                            <input type="text" id="startTime" placeholder="‡πÄ‡∏ä‡πà‡∏ô 16:00 ‡∏´‡∏£‡∏∑‡∏≠ 09:30"
                                class="w-full px-3 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg"
                                maxlength="5">

                        </div>

                        <!-- End Time -->
                        <div class="bg-red-50 rounded-lg p-4 border-l-4 border-red-500">
                            <label class="block text-sm font-semibold text-red-700 mb-2">
                                üî¥ ‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î (24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)
                            </label>
                            <input type="text" id="endTime" placeholder="‡πÄ‡∏ä‡πà‡∏ô 22:00 ‡∏´‡∏£‡∏∑‡∏≠ 14:15"
                                class="w-full px-3 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 text-lg"
                                maxlength="5">

                        </div>
                    </div>

                    <!-- Calculate Button -->
                    <div class="text-center mb-6">
                        <button onclick="calculateShiftTime()"
                            class="enhanced-btn bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-3 px-8 rounded-lg transition-all shadow-lg hover:shadow-blue-500/50 text-lg">
                            üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤
                        </button>
                    </div>

                    <!-- Results Section -->
                    <div id="shiftResults" class="hidden">
                        <!-- Total Time -->
                        <div class="bg-green-50 rounded-lg p-6 border-l-4 border-green-500 mb-4 glow-effect">
                            <h3 class="text-lg font-semibold text-green-700 mb-2">‚è±Ô∏è ‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°</h3>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-green-600" id="totalHours">0</p>
                                    <p class="text-sm text-green-700">‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-green-600" id="totalMinutes">0</p>
                                    <p class="text-sm text-green-700">‡∏ô‡∏≤‡∏ó‡∏µ</p>
                                </div>
                            </div>
                        </div>

                        <!-- Detailed Breakdown -->
                        <div class="bg-purple-50 rounded-lg p-6 border-l-4 border-purple-500 glow-effect">
                            <h3 class="text-lg font-semibold text-purple-700 mb-2">üìä ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span class="text-gray-700">‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô:</span>
                                    <span class="font-medium" id="displayStartTime">-</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-700">‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î:</span>
                                    <span class="font-medium" id="displayEndTime">-</span>
                                </div>
                                <div class="flex justify-between border-t pt-2">
                                    <span class="text-gray-700 font-semibold">‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°:</span>
                                    <span class="font-bold text-purple-600" id="displayTotalTime">-</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="text-gray-700">‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏≤‡∏ó‡∏µ:</span>
                                    <span class="font-medium text-blue-600" id="displayTotalMinutesOnly">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex justify-center space-x-4 mt-4">
                        <button onclick="clearShiftTime()"
                            class="enhanced-btn bg-gray-500 hover:bg-gray-600 text-white font-semibold py-2 px-6 rounded-lg transition-colors">
                            üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                        </button>
                        <button onclick="copyShiftTime()" id="copyShiftBtn"
                            class="enhanced-btn bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors hidden">
                            üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤
                        </button>
                    </div>
                </div>



                <!-- Back Button -->
                <div class="text-center mt-8">
                    <button onclick="showPage('homePage')"
                        class="enhanced-btn bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg transition-colors backdrop-blur-md shadow-lg hover:shadow-white/20">
                        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let selectedCharges = [];

        // System functions
        function enterSystem() {
            document.getElementById('welcomeScreen').classList.add('hidden');
            document.getElementById('homePage').classList.remove('hidden');
            document.getElementById('mainNavigation').classList.remove('hidden');

            // ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            const audio = document.getElementById('backgroundMusic');
            if (audio && audio.src) {
                audio.play().catch(error => {
                    console.log('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏î‡πâ:', error);
                    // ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞ browser policy ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏û‡∏ö
                });
            }
        }

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.add('hidden');
            });
            // Show selected page
            document.getElementById(pageId).classList.remove('hidden');
        }

        function goToHomePage() {
            showPage('homePage');
        }

        function openExternalLink(url) {
            window.open(url, '_blank', 'noopener,noreferrer');
        }

        // Music controls
        let currentMusicType = 'default';
        let currentMusicName = 'XIN TOWN - SAWMENOW';
        let musicPlaylist = [
            {
                id: 'default',
                name: 'XIN TOWN - SAWMENOW',
                type: 'file',
                source: './XIN TOWN - SAWMENOW.mp3',
                icon: 'üéµ',
                description: '‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏£‡∏∞‡∏ö‡∏ö (‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö)'
            }
        ];

        function initializeMusicControls() {
            const audio = document.getElementById('backgroundMusic');
            const muteBtn = document.getElementById('muteBtn');
            const volumeSlider = document.getElementById('volumeSlider');
            const volumeDisplay = document.getElementById('volumeDisplay');
            const changeMusicBtn = document.getElementById('changeMusicBtn');

            if (!audio) return;

            // ‡∏•‡∏¥‡∏™‡∏ï‡πå‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ (‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)
            const musicSources = [
                './XIN TOWN - SAWMENOW.mp3',  // ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
                'XIN TOWN - SAWMENOW.mp3',    // ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô (‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ ./)
                'assets/XIN TOWN - SAWMENOW.mp3', // ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå assets
                'music/XIN TOWN - SAWMENOW.mp3',  // ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå music
                'audio/XIN TOWN - SAWMENOW.mp3'   // ‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå audio
            ];

            let currentSourceIndex = 0;
            let musicLoaded = false;

            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ
            function tryLoadMusic() {
                if (currentSourceIndex >= musicSources.length) {
                    console.log('‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏•‡∏á - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á');
                    // ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏û‡∏•‡∏á‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏û‡∏•‡∏á
                    const musicControls = muteBtn.closest('.flex');
                    if (musicControls) {
                        musicControls.style.opacity = '0.5';
                        musicControls.title = '‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏•‡∏á';
                    }
                    return;
                }

                const source = musicSources[currentSourceIndex];
                audio.src = source;

                // ‡∏•‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏•‡∏á
                audio.load();

                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                audio.addEventListener('canplaythrough', function () {
                    if (!musicLoaded) {
                        musicLoaded = true;
                        console.log(`‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏•‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏à‡∏≤‡∏Å: ${source}`);
                        // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏û‡∏•‡∏á‡∏õ‡∏Å‡∏ï‡∏¥
                        const musicControls = muteBtn.closest('.flex');
                        if (musicControls) {
                            musicControls.style.opacity = '1';
                            musicControls.title = '‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏û‡∏•‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á';
                        }
                        updateCurrentPlaying();
                    }
                }, { once: true });

                audio.addEventListener('error', function () {
                    if (!musicLoaded) {
                        console.log(`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å: ${source}`);
                        currentSourceIndex++;
                        tryLoadMusic();
                    }
                }, { once: true });
            }

            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏•‡∏≠‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏û‡∏•‡∏á
            tryLoadMusic();

            // Set initial volume
            audio.volume = 0.2;

            // Mute/unmute button
            muteBtn.addEventListener('click', function () {
                if (!musicLoaded && currentMusicType === 'default') {
                    alert('‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏û‡∏•‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå "XIN TOWN - SAWMENOW.mp3" ‡πÅ‡∏•‡πâ‡∏ß');
                    return;
                }

                if (audio.muted) {
                    audio.muted = false;
                    this.textContent = 'üîä';
                } else {
                    audio.muted = true;
                    this.textContent = 'üîá';
                }
            });

            // Volume slider
            volumeSlider.addEventListener('input', function () {
                const volume = this.value / 100;
                audio.volume = volume;
                volumeDisplay.textContent = this.value + '%';

                if (volume === 0) {
                    muteBtn.textContent = 'üîá';
                } else {
                    muteBtn.textContent = 'üîä';
                }
            });

            // Change music button
            changeMusicBtn.addEventListener('click', function () {
                openMusicModal();
            });
        }

        // Music modal functions
        function openMusicModal() {
            document.getElementById('musicModal').classList.remove('hidden');
            updateCurrentPlaying();
            // No tabs needed - direct URL input
        }

        function closeMusicModal() {
            document.getElementById('musicModal').classList.add('hidden');
        }

        function updateCurrentPlaying() {
            const currentPlaying = document.getElementById('currentPlaying');
            const currentSongName = document.getElementById('currentSongName');

            if (currentMusicName) {
                currentPlaying.classList.remove('hidden');
                currentSongName.textContent = currentMusicName;
            } else {
                currentPlaying.classList.add('hidden');
            }
        }

        // Load YouTube music and add to playlist
        function loadYouTubeMusic() {
            const youtubeUrl = document.getElementById('youtubeUrl').value.trim();

            if (!youtubeUrl) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á YouTube');
                return;
            }

            // Extract video ID from YouTube URL
            const videoId = extractYouTubeVideoId(youtubeUrl);
            if (!videoId) {
                alert('URL ‡∏Ç‡∏≠‡∏á YouTube ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                return;
            }

            // Show loading state
            const loadButton = document.querySelector('button[onclick="loadYouTubeMusic()"]');
            const originalText = loadButton.textContent;
            loadButton.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...';
            loadButton.disabled = true;

            // Get video title using YouTube oEmbed API
            const apiUrl = "https://www.youtube.com/oembed?url=" + encodeURIComponent(youtubeUrl) + "&format=json";

            fetch(apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏î‡πâ');
                    }
                    return response.json();
                })
                .then(data => {
                    const videoTitle = data.title;

                    // Create YouTube embed URL for audio
                    const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&loop=1&playlist=${videoId}&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1`;

                    // Add to playlist
                    const newMusic = {
                        id: `youtube_${videoId}`,
                        name: videoTitle,
                        type: 'youtube',
                        source: embedUrl,
                        originalUrl: youtubeUrl,
                        icon: 'üé¨',
                        description: '‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å YouTube'
                    };

                    // Check if already exists
                    const existingIndex = musicPlaylist.findIndex(music => music.id === newMusic.id);
                    if (existingIndex === -1) {
                        musicPlaylist.push(newMusic);
                        updatePlaylistDisplay();
                        savePlaylistToStorage();

                        // Play the new music
                        playMusicFromPlaylist(newMusic.id);

                        alert(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á "${videoTitle}" ‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß!`);
                    } else {
                        alert('‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß');
                    }

                    // Clear input
                    document.getElementById('youtubeUrl').value = '';
                })
                .catch(error => {
                    console.error('Error fetching YouTube title:', error);

                    // Fallback to manual input if API fails
                    const videoTitle = prompt('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏•‡∏á:', `YouTube Video ${videoId.substring(0, 8)}`);
                    if (videoTitle) {
                        // Create YouTube embed URL for audio
                        const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=1&loop=1&playlist=${videoId}&controls=0&showinfo=0&rel=0&modestbranding=1&playsinline=1`;

                        // Add to playlist
                        const newMusic = {
                            id: `youtube_${videoId}`,
                            name: videoTitle,
                            type: 'youtube',
                            source: embedUrl,
                            originalUrl: youtubeUrl,
                            icon: 'üé¨',
                            description: '‡πÄ‡∏û‡∏•‡∏á‡∏à‡∏≤‡∏Å YouTube'
                        };

                        // Check if already exists
                        const existingIndex = musicPlaylist.findIndex(music => music.id === newMusic.id);
                        if (existingIndex === -1) {
                            musicPlaylist.push(newMusic);
                            updatePlaylistDisplay();
                            savePlaylistToStorage();

                            // Play the new music
                            playMusicFromPlaylist(newMusic.id);

                            alert(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏•‡∏á "${videoTitle}" ‡∏•‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß!`);
                        } else {
                            alert('‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß');
                        }

                        // Clear input
                        document.getElementById('youtubeUrl').value = '';
                    }
                })
                .finally(() => {
                    // Reset button state
                    loadButton.textContent = originalText;
                    loadButton.disabled = false;
                });
        }

        // Play music from playlist
        function playMusicFromPlaylist(musicId) {
            const music = musicPlaylist.find(m => m.id === musicId);
            if (!music) return;

            // Stop current audio/video
            const audio = document.getElementById('backgroundMusic');
            audio.pause();

            const youtubeFrame = document.getElementById('youtubeFrame');
            if (youtubeFrame) {
                youtubeFrame.src = '';
            }

            if (music.type === 'file') {
                // Load audio file
                audio.src = music.source;
                audio.load();
                audio.play().catch(error => {
                    console.log('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏î‡πâ:', error);
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏°‡πà‡∏û‡∏ö');
                });
            } else if (music.type === 'youtube') {
                // Load YouTube video
                if (!youtubeFrame) {
                    const newFrame = document.createElement('iframe');
                    newFrame.id = 'youtubeFrame';
                    newFrame.style.display = 'none';
                    newFrame.allow = 'autoplay';
                    document.body.appendChild(newFrame);
                }
                document.getElementById('youtubeFrame').src = music.source;
            }

            currentMusicType = music.type;
            currentMusicName = music.name;
            updateCurrentPlaying();
            updatePlaylistDisplay(); // Update active state
        }

        // Remove music from playlist
        function removeMusicFromPlaylist(musicId) {
            if (musicId === 'default') {
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö‡πÑ‡∏î‡πâ');
                return;
            }

            const musicIndex = musicPlaylist.findIndex(m => m.id === musicId);
            if (musicIndex === -1) return;

            const music = musicPlaylist[musicIndex];

            if (confirm(`‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á "${music.name}" ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?`)) {
                // If currently playing this music, switch to default
                if (currentMusicName === music.name) {
                    playMusicFromPlaylist('default');
                }

                musicPlaylist.splice(musicIndex, 1);
                updatePlaylistDisplay();
                savePlaylistToStorage();

                alert(`‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á "${music.name}" ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß`);
            }
        }

        // Update playlist display
        function updatePlaylistDisplay() {
            const container = document.getElementById('musicPlaylistContainer');
            if (!container) return;

            let html = '';

            musicPlaylist.forEach(music => {
                const isActive = currentMusicName === music.name;
                const activeClass = isActive ? 'bg-blue-100 border-blue-400' : 'bg-gray-50 hover:bg-blue-50';

                html += `
                    <div class="preset-music ${activeClass} p-3 rounded-lg cursor-pointer border transition-all">
                        <div class="flex justify-between items-center">
                            <div class="flex-1" onclick="playMusicFromPlaylist('${music.id}')">
                                <h5 class="font-medium text-gray-800 ${isActive ? 'text-blue-800' : ''}">${music.icon} ${music.name}</h5>
                                <p class="text-sm text-gray-600">${music.description}</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                ${isActive ? '<span class="text-blue-600 text-sm">üéµ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô</span>' : ''}
                                ${music.id !== 'default' ? `<button onclick="removeMusicFromPlaylist('${music.id}')" class="text-red-500 hover:text-red-700 text-sm px-2 py-1 rounded" title="‡∏•‡∏ö‡πÄ‡∏û‡∏•‡∏á">üóëÔ∏è</button>` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // Save playlist to localStorage
        function savePlaylistToStorage() {
            try {
                const playlistToSave = musicPlaylist.filter(music => music.id !== 'default'); // Don't save default music
                localStorage.setItem('xintown_music_playlist', JSON.stringify(playlistToSave));
            } catch (error) {
                console.log('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏î‡πâ:', error);
            }
        }

        // Load playlist from localStorage
        function loadPlaylistFromStorage() {
            try {
                const savedPlaylist = localStorage.getItem('xintown_music_playlist');
                if (savedPlaylist) {
                    const parsedPlaylist = JSON.parse(savedPlaylist);
                    // Add saved music to playlist (keeping default at the beginning)
                    musicPlaylist = [musicPlaylist[0], ...parsedPlaylist];
                    updatePlaylistDisplay();
                }
            } catch (error) {
                console.log('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏•‡∏á‡πÑ‡∏î‡πâ:', error);
            }
        }

        // Clear all playlist except default
        function clearPlaylist() {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏•‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà? (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡πÄ‡∏û‡∏•‡∏á‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö)')) {
                // Keep only default music
                musicPlaylist = [musicPlaylist[0]];

                // Switch to default if currently playing other music
                const defaultMusic = musicPlaylist[0];
                if (currentMusicName !== defaultMusic.name) {
                    playMusicFromPlaylist('default');
                }

                updatePlaylistDisplay();
                savePlaylistToStorage();

                alert('‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏•‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            }
        }

        // Extract YouTube video ID from URL
        function extractYouTubeVideoId(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : null;
        }

        // No tab switching needed anymore - only URL input

        // Search functions removed - only URL input available



        // Charge database with names and descriptions
        const chargeDatabase = {
            // ‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏Å‡∏ï‡∏¥
            fight: { name: '‡∏ó‡∏∞‡πÄ‡∏•‡∏≤‡∏∞‡∏ß‡∏¥‡∏ß‡∏≤‡∏ó', desc: '‡∏Å‡∏≤‡∏£‡∏ó‡∏∞‡πÄ‡∏•‡∏≤‡∏∞‡∏ß‡∏¥‡∏ß‡∏≤‡∏ó‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞', fine: 10000, jail: 10 },
            disturbance: { name: '‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡∏∏‡πà‡∏ô‡∏ß‡∏≤‡∏¢ ‡∏ó‡∏∏‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö', desc: '‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ó‡∏µ‡πà‡∏Å‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡∏∏‡πà‡∏ô‡∏ß‡∏≤‡∏¢‡πÉ‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏°', fine: 5000, jail: 5 },
            mask: { name: '‡πÉ‡∏™‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏≤‡∏Å ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏á‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤', desc: '‡∏Å‡∏≤‡∏£‡∏õ‡∏¥‡∏î‡∏ö‡∏±‡∏á‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞', fine: 3000, jail: 5 },
            assault: { name: '‡πÄ‡∏à‡∏ï‡∏ô‡∏≤‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ - ‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô', desc: '‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡∏ï‡∏ô‡∏≤', fine: 20000, jail: 10 },
            suit: { name: '‡πÅ‡∏Å‡πä‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏™‡∏π‡∏ó‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏ô', desc: '‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏≥‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏™‡∏π‡∏ó‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏ï‡∏ô', fine: 20000, jail: 5 },
            pain: { name: '‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏û‡∏Å‡πÄ‡∏û‡∏ô', desc: '‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏´‡πâ‡∏≤‡∏°‡∏û‡∏Å‡πÄ‡∏û‡∏ô', fine: 50000, jail: 15 },
            kidnap: { name: '‡∏•‡∏±‡∏Å‡∏û‡∏≤‡∏ï‡∏±‡∏ß', desc: '‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏õ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°', fine: 10000, jail: 10 },
            outOfCity: { name: '‡∏≠‡∏≠‡∏Å‡∏ô‡∏≠‡∏Å‡πÄ‡∏°‡∏∑‡∏≠‡∏á', desc: '‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏ô‡∏≠‡∏Å‡πÄ‡∏Ç‡∏ï‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï', fine: 0, jail: 0, special: 'X2 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ' },
            conspiracy: { name: '‡∏™‡∏°‡∏£‡∏π‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Ñ‡∏¥‡∏î/‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î', desc: '‡∏Å‡∏≤‡∏£‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î', fine: 0, jail: 0, special: '‡∏ï‡∏≤‡∏°‡∏Ñ‡∏î‡∏µ‡∏´‡∏•‡∏±‡∏Å' },
            showWeapon: { name: '‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞', desc: '‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞', fine: 5000, jail: 0 },
            riskArea: { name: '‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á', desc: '‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢', fine: 2000, jail: 3 },
            escapeArrest: { name: '‡∏´‡∏•‡∏ö‡∏´‡∏ô‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏ö‡∏Å‡∏∏‡∏°', desc: '‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏ö‡∏´‡∏ô‡∏µ‡∏à‡∏≤‡∏Å‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', fine: 3000, jail: 5 },
            distribute: { name: '‡∏¢‡∏±‡∏î‡πÄ‡∏¢‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô', desc: '‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡∏Å‡∏à‡πà‡∏≤‡∏¢‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', fine: 8000, jail: 5 },
            vehicleTheft: { name: '‡πÇ‡∏à‡∏£‡∏Å‡∏£‡∏£‡∏°‡∏¢‡∏≤‡∏ô‡∏û‡∏≤‡∏´‡∏ô‡∏∞', desc: '‡∏Å‡∏≤‡∏£‡∏Ç‡πÇ‡∏°‡∏¢‡∏£‡∏ñ‡∏¢‡∏ô‡∏ï‡πå‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏ã‡∏Ñ‡πå', fine: 10000, jail: 10 },
            embezzlement: { name: '‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå', desc: '‡∏Å‡∏≤‡∏£‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô', fine: 15000, jail: 20 },
            vandalism: { name: '‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô', desc: '‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô', fine: 5000, jail: 5 },
            trespassing: { name: '‡∏ö‡∏∏‡∏Å‡∏£‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏´‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô / ‡∏ö‡∏∏‡∏Å‡∏£‡∏∏‡∏Å‡∏ö‡πâ‡∏≤‡∏ô', desc: '‡∏Å‡∏≤‡∏£‡∏ö‡∏∏‡∏Å‡∏£‡∏∏‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô', fine: 50000, jail: 15 },
            showIllegal: { name: '‡πÇ‡∏ä‡∏ß‡πå‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô‡∏î‡∏≥‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', desc: '‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', fine: 5000, jail: 8 },
            darkCar: { name: '‡∏ô‡∏≥‡∏£‡∏ñ‡∏ó‡∏∂‡∏ö‡∏°‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏≥', desc: '‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏ñ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ó‡∏∂‡∏ö‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ú‡∏¥‡∏î', fine: 0, jail: 0, special: 'X4 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ(‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö)' },
            mountain: { name: '‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏Ç‡∏≤', desc: '‡∏Å‡∏≤‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏ö‡∏ô‡πÄ‡∏Ç‡∏≤‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï', fine: 0, jail: 0, special: 'X4 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ(‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö)' },
            beforeServerReset: { name: '‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏≥‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏ü‡∏£‡∏µ 10 ‡∏ô‡∏≤‡∏ó‡∏µ', desc: '‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏î‡∏≥‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï', fine: 0, jail: 0, special: 'X10 ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏î‡∏µ(‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö)' },

            // ‡∏Ç‡∏≠‡∏á‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢
            cement: { name: '‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡∏õ‡∏π‡∏ô', desc: '‡∏°‡∏µ‡∏õ‡∏π‡∏ô‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', fine: 2000, jail: 3, quantity: true },
            wire: { name: '‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡∏™‡∏≤‡∏¢‡πÑ‡∏ü', desc: '‡∏°‡∏µ‡∏™‡∏≤‡∏¢‡πÑ‡∏ü‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', fine: 2000, jail: 3, quantity: true },
            illegalMoney: { name: '‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', desc: '‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤‡πÇ‡∏î‡∏¢‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', fine: 0, jail: 5, special: '‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏î‡∏á X2', quantity: true, fixedJail: true },
            capsules: { name: '‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á Capsule Blue, Red, Green', desc: '‡∏°‡∏µ Capsule ‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡πÇ‡∏î‡∏¢‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢', fine: 3000, jail: 5, quantity: true },
            lockpick: { name: '‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á Lockpick', desc: '‡∏°‡∏µ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏á‡∏±‡∏î‡πÅ‡∏á‡∏∞‡πÉ‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á', fine: 5000, jail: 10, quantity: true },

            // ‡∏Ñ‡∏î‡∏µ‡πÅ‡∏î‡∏á
            noCooperation: { name: '‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', desc: '‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πà‡∏ß‡∏°‡∏°‡∏∑‡∏≠‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡∏ö‡∏™‡∏ß‡∏ô', fine: 30000, jail: 10 },
            stealGovCar: { name: '‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ç‡πÇ‡∏°‡∏¢‡∏£‡∏ñ‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', desc: '‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ç‡πÇ‡∏°‡∏¢‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', fine: 70000, jail: 20 },
            disturbOfficer: { name: '‡∏Å‡πà‡∏≠‡∏Å‡∏ß‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', desc: '‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏Å‡∏ß‡∏ô‡∏Ç‡∏±‡∏î‡∏Ç‡∏ß‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', fine: 120000, jail: 10 },
            disturbGovArea: { name: '‡∏Å‡πà‡∏≠‡πÄ‡∏´‡∏ï‡∏∏‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£', desc: '‡∏Å‡∏≤‡∏£‡∏Å‡πà‡∏≠‡πÄ‡∏´‡∏ï‡∏∏‡πÉ‡∏ô‡∏ö‡∏£‡∏¥‡πÄ‡∏ß‡∏ì‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏ä‡∏Å‡∏≤‡∏£', fine: 80000, jail: 10 },
            impersonateOfficer: { name: '‡πÅ‡∏≠‡∏ö‡∏≠‡πâ‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô', desc: '‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏≠‡∏°‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', fine: 80000, jail: 15 },
            falseReport: { name: '‡πÅ‡∏à‡πâ‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ó‡πá‡∏à ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡πá‡∏à', desc: '‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ó‡πá‡∏à‡∏ï‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', fine: 20000, jail: 10 },
            assaultOfficer: { name: '‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà', desc: '‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ê', fine: 100000, jail: 30 },
            intentAssaultOfficer: { name: '‡πÄ‡∏à‡∏ï‡∏ô‡∏≤‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢', desc: '‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡πÇ‡∏î‡∏¢‡πÄ‡∏à‡∏ï‡∏ô‡∏≤', fine: 20000, jail: 10 },
            embezzlementRed: { name: '‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå', desc: '‡∏Å‡∏≤‡∏£‡∏¢‡∏±‡∏Å‡∏¢‡∏≠‡∏Å‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô', fine: 15000, jail: 20 }
        };

        let totalFine = 0;
        let totalJail = 0;
        let isRealTimeMode = false; // Track if real-time calculation is active

        // Helper functions for charge categorization
        function isRedCaseCharge(chargeId) {
            const redCaseCharges = [
                'noCooperation', 'stealGovCar', 'disturbOfficer', 'murder', 'robbery',
                'carTheft', 'terrorism', 'disturbGovArea', 'impersonateOfficer',
                'falseReport', 'assaultOfficer', 'intentAssaultOfficer', 'embezzlementRed'
            ];
            return redCaseCharges.includes(chargeId.replace(/_\d+$/, ''));
        }

        function isMultiplierCharge(chargeId) {
            const multiplierCharges = ['outOfCity', 'darkCar', 'mountain', 'beforeServerReset'];
            return multiplierCharges.includes(chargeId.replace(/_\d+$/, ''));
        }

        // Add illegal charge with quantity input (toggle functionality)
        function addIllegalCharge(chargeId) {
            // Check if this charge already exists
            const existingIndex = selectedCharges.findIndex(charge => charge.originalId === chargeId);

            if (existingIndex !== -1) {
                // Remove existing charge
                selectedCharges.splice(existingIndex, 1);
                updateSelectedChargesDisplay();
                updateTotalCalculation();
                updateIllegalItemAppearance(chargeId, false);
                return;
            }

            const quantityInput = document.querySelector(`input[data-charge="${chargeId}"]`);
            const quantity = parseInt(quantityInput.value) || 1;
            const chargeInfo = chargeDatabase[chargeId];

            // Create unique ID for this charge instance
            const uniqueId = `${chargeId}_${Date.now()}`;

            const newCharge = {
                id: uniqueId,
                originalId: chargeId,
                name: chargeInfo.name,
                desc: chargeInfo.desc,
                fine: chargeInfo.fine * quantity,
                jail: chargeId === 'illegalMoney' ? 5 : chargeInfo.jail * quantity, // ‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏î‡∏á‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏á‡∏ó‡∏µ‡πà 5 ‡∏ô‡∏≤‡∏ó‡∏µ
                quantity: quantity,
                originalFine: chargeInfo.fine,
                originalJail: chargeInfo.jail,
                special: chargeInfo.special
            };

            selectedCharges.push(newCharge);
            updateSelectedChargesDisplay();
            updateTotalCalculation();
            updateIllegalItemAppearance(chargeId, true);

            // Reset quantity input
            quantityInput.value = 1;
        }

        // Handle illegal charge button click (add or remove)
        function handleIllegalChargeButton(chargeId) {
            const hasCharge = selectedCharges.some(charge => charge.originalId === chargeId);

            if (hasCharge) {
                // Remove all instances of this charge type
                selectedCharges = selectedCharges.filter(charge => charge.originalId !== chargeId);
                updateSelectedChargesDisplay();
                updateTotalCalculation();
                updateIllegalItemAppearance(chargeId, false);
            } else {
                // Add new charge
                addIllegalCharge(chargeId);
            }
        }

        // Toggle charge selection
        function toggleCharge(chargeId, fine, jail) {
            const existingIndex = selectedCharges.findIndex(charge => charge.originalId === chargeId);

            if (existingIndex !== -1) {
                // Remove charge
                selectedCharges.splice(existingIndex, 1);
            } else {
                // Add charge
                const chargeInfo = chargeDatabase[chargeId];
                if (chargeInfo) {
                    // For regular charges without quantity
                    const newCharge = {
                        id: chargeId,
                        originalId: chargeId,
                        name: chargeInfo.name,
                        desc: chargeInfo.desc,
                        fine: parseInt(fine),
                        jail: parseInt(jail),
                        quantity: 1,
                        originalFine: parseInt(fine),
                        originalJail: parseInt(jail),
                        special: chargeInfo.special
                    };
                    selectedCharges.push(newCharge);
                }
            }

            updateSelectedChargesDisplay();
            updateTotalCalculation();
            updateChargeItemAppearance();
        }

        // Update charge item appearance to show selected state
        function updateChargeItemAppearance() {
            document.querySelectorAll('.charge-item').forEach(item => {
                const chargeId = item.getAttribute('data-charge');
                const isSelected = selectedCharges.find(charge => charge.originalId === chargeId || charge.id === chargeId);

                // Don't change appearance for illegal items since they have their own function
                const isIllegalItem = ['cement', 'wire', 'illegalMoney', 'capsules', 'lockpick'].includes(chargeId);
                if (isIllegalItem) {
                    return;
                }

                if (isSelected) {
                    item.classList.add('bg-blue-100', 'border-blue-400');
                    item.classList.remove('bg-gray-50', 'hover:bg-blue-50');
                } else {
                    item.classList.remove('bg-blue-100', 'border-blue-400');
                    item.classList.add('bg-gray-50', 'hover:bg-blue-50');
                }
            });
        }

        // Update illegal item appearance to show selected state
        function updateIllegalItemAppearance(chargeId, isSelected) {
            const item = document.querySelector(`[data-charge="${chargeId}"]`);
            const button = item.querySelector('button');

            if (isSelected) {
                item.classList.add('bg-blue-100', 'border-blue-400');
                item.classList.remove('bg-gray-50', 'hover:bg-blue-50');
                button.textContent = '‡∏•‡∏ö';
                button.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                button.classList.add('bg-red-600', 'hover:bg-red-700');
            } else {
                item.classList.remove('bg-blue-100', 'border-blue-400');
                item.classList.add('bg-gray-50', 'hover:bg-blue-50');
                button.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°';
                button.classList.remove('bg-red-600', 'hover:bg-red-700');
                button.classList.add('bg-blue-600', 'hover:bg-blue-700');
            }
        }

        // Remove charge from selection
        function removeCharge(chargeId) {
            selectedCharges = selectedCharges.filter(charge => charge.id !== chargeId);
            updateSelectedChargesDisplay();
            updateTotalCalculation();
            updateChargeItemAppearance();
        }

        // Update selected charges display
        function updateSelectedChargesDisplay() {
            const container = document.getElementById('selectedCharges');
            const noCalculation = document.getElementById('noCalculation');
            const calculationResults = document.getElementById('calculationResults');
            const specialAlert = document.getElementById('specialAlert');
            const copyButtonContainer = document.getElementById('copyButtonContainer');

            if (selectedCharges.length === 0) {
                container.innerHTML = `<p class="text-gray-500 italic">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏´‡∏≤</p>`;
                noCalculation.classList.remove('hidden');
                calculationResults.classList.add('hidden');
                specialAlert.classList.add('hidden');
                copyButtonContainer.classList.add('hidden');
                isRealTimeMode = false; // Reset real-time mode when no charges
                return;
            }

            // Check for special charges that affect calculation
            const hasSpecialCharges = selectedCharges.some(charge =>
                charge.special || isMultiplierCharge(charge.originalId)
            );

            if (hasSpecialCharges) {
                specialAlert.classList.remove('hidden');
            } else {
                specialAlert.classList.add('hidden');
            }

            let html = '';
            selectedCharges.forEach(charge => {
                html += `
                    <div class="flex justify-between items-center bg-white p-3 rounded-lg border shadow-sm">
                        <div class="flex-1">
                            <h4 class="font-medium text-gray-800">${charge.name}</h4>
                            ${charge.quantity > 1 ? `<p class="text-sm text-gray-600">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${charge.quantity}</p>` : ''}
                            ${charge.special ? `<p class="text-sm text-purple-600">${charge.special}</p>` : ''}
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="text-right text-sm">
                                ${charge.special && charge.originalId === 'illegalMoney' ?
                        `<div class="text-purple-600 font-bold">${charge.quantity * 2} XC (${charge.special})</div>` :
                        charge.special ?
                            `<div class="text-purple-600 font-bold">${charge.special}</div>` :
                            `<div class="text-red-600 font-bold">${charge.fine.toLocaleString()} XC</div>`
                    }
                                <div class="text-orange-600">${charge.jail} ‡∏ô‡∏≤‡∏ó‡∏µ</div>
                            </div>
                            <button onclick="removeCharge('${charge.id}')" class="text-red-500 hover:text-red-700 ml-2">
                                <span class="text-lg">‚úï</span>
                            </button>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;

            // Only auto-calculate if real-time mode is active
            if (selectedCharges.length > 0 && isRealTimeMode) {
                calculateAndDisplayResults();
            }
        }

        // Update total calculation
        function updateTotalCalculation() {
            // Separate charges by category
            const redCaseCharges = selectedCharges.filter(charge => isRedCaseCharge(charge.originalId));
            const otherCharges = selectedCharges.filter(charge => !isRedCaseCharge(charge.originalId) && !isMultiplierCharge(charge.originalId));
            const multiplierCharges = selectedCharges.filter(charge => isMultiplierCharge(charge.originalId));

            // Calculate base totals for non-red cases (excluding multiplier charges)
            let baseFine = otherCharges.reduce((sum, charge) => {
                if (!charge.special || charge.originalId === 'illegalMoney') {
                    return sum + charge.fine;
                }
                return sum;
            }, 0);

            let baseJail = otherCharges.reduce((sum, charge) => {
                return sum + charge.jail;
            }, 0);

            // Calculate red case totals (not affected by multipliers)
            let redCaseFine = redCaseCharges.reduce((sum, charge) => sum + charge.fine, 0);
            let redCaseJail = redCaseCharges.reduce((sum, charge) => sum + charge.jail, 0);

            // Check for multiplier charges
            let hasOutOfCity = false;
            let hasDarkCar = false;
            let hasMountain = false;
            let hasBeforeServerReset = false;

            multiplierCharges.forEach(charge => {
                if (charge.originalId === 'outOfCity') {
                    hasOutOfCity = true;
                } else if (charge.originalId === 'darkCar') {
                    hasDarkCar = true;
                } else if (charge.originalId === 'mountain') {
                    hasMountain = true;
                } else if (charge.originalId === 'beforeServerReset') {
                    hasBeforeServerReset = true;
                }
            });

            // Calculate multiplier by adding all multipliers together
            let multiplier = 0;

            // Add each multiplier value
            if (hasBeforeServerReset) {
                multiplier += 10; // X10
            }
            if (hasMountain) {
                multiplier += 4; // X4
            }
            if (hasOutOfCity) {
                multiplier += 2; // X2
            }
            if (hasDarkCar) {
                multiplier += 4; // X4
            }

            // If no multipliers, use 1 as base
            if (multiplier === 0) {
                multiplier = 1;
            }

            // Apply multiplier only to base charges (not red cases)
            const multipliedFine = baseFine * multiplier;

            // Handle special charges like illegal money
            let specialFine = 0;
            selectedCharges.forEach(charge => {
                if (charge.originalId === 'illegalMoney') {
                    specialFine += (charge.quantity * 2) * multiplier; // X2 of illegal money amount * multiplier
                }
            });

            // Calculate final totals
            totalFine = multipliedFine + redCaseFine + specialFine;
            totalJail = baseJail + redCaseJail;
        }

        // Auto-calculate and display results
        function calculateAndDisplayResults() {
            // Separate charges by type
            let baseFine = 0;
            let baseJail = 0;
            let bailableJail = 0; // Only regular charges and illegal items can be bailed
            let redCaseCharges = [];

            // Check for special modifiers
            let hasMountain = false;
            let hasOutOfCity = false;
            let hasDarkCar = false;
            let hasBeforeServerReset = false;

            selectedCharges.forEach(charge => {
                if (charge.originalId === 'mountain') {
                    hasMountain = true;
                } else if (charge.originalId === 'outOfCity') {
                    hasOutOfCity = true;
                } else if (charge.originalId === 'darkCar') {
                    hasDarkCar = true;
                } else if (charge.originalId === 'beforeServerReset') {
                    hasBeforeServerReset = true;
                } else if (isRedCaseCharge(charge.originalId)) {
                    redCaseCharges.push(charge);
                } else if (charge.originalId === 'illegalMoney') {
                    // ‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏î‡∏á‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å‡∏Ñ‡∏á‡∏ó‡∏µ‡πà 5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ
                    baseJail += charge.jail;
                    bailableJail += charge.jail;
                } else if (!charge.special) {
                    baseFine += charge.fine;
                    baseJail += charge.jail;
                    bailableJail += charge.jail; // Regular charges can be bailed
                }
            });

            // Calculate multiplier by adding all multipliers together
            let multiplier = 0;

            // Add each multiplier value
            if (hasBeforeServerReset) {
                multiplier += 10; // X10
            }
            if (hasMountain) {
                multiplier += 4; // X4
            }
            if (hasOutOfCity) {
                multiplier += 2; // X2
            }
            if (hasDarkCar) {
                multiplier += 4; // X4
            }

            // If no multipliers, use 1 as base
            if (multiplier === 0) {
                multiplier = 1;
            }

            // Calculate final totals
            const multipliedFine = baseFine * multiplier;
            const redCaseFine = redCaseCharges.reduce((sum, charge) => sum + charge.fine, 0);
            const redCaseJail = redCaseCharges.reduce((sum, charge) => sum + charge.jail, 0);

            let totalFine = multipliedFine + redCaseFine;
            const totalJail = baseJail + redCaseJail;

            // Handle special charges
            selectedCharges.forEach(charge => {
                if (charge.originalId === 'illegalMoney') {
                    totalFine += (charge.quantity * 2) * multiplier; // X2 of illegal money amount * multiplier
                }
            });

            // Check if there are red case charges
            const hasRedCases = redCaseCharges.length > 0;

            // Calculate bail amount (only for bailable charges)
            const bailAmount = bailableJail * 2000;

            // Calculate total with bail
            const totalWithBail = totalFine + bailAmount;

            // Update display elements
            document.getElementById('totalFine').textContent = totalFine.toLocaleString() + ' XinCoin';
            document.getElementById('totalJail').textContent = totalJail.toLocaleString() + ' ‡∏ô‡∏≤‡∏ó‡∏µ';

            // Update bail display based on red case presence
            const bailAmountElement = document.getElementById('bailAmount');
            const bailContainer = bailAmountElement.closest('.bg-green-50');
            const bailDescription = bailContainer.querySelector('p');

            if (hasRedCases) {
                bailAmountElement.textContent = bailAmount.toLocaleString() + ' XinCoin';
                bailDescription.innerHTML = `‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ (${bailableJail} ‡∏ô‡∏≤‡∏ó‡∏µ √ó 2,000 XinCoin)<br><span class="text-red-600 font-medium">‚ö†Ô∏è ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Ñ‡∏î‡∏µ‡πÅ‡∏î‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ</span>`;
            } else {
                bailAmountElement.textContent = bailAmount.toLocaleString() + ' XinCoin';
                bailDescription.textContent = `‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏à‡∏≤‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≥‡∏Ñ‡∏∏‡∏Å (${totalJail} ‡∏ô‡∏≤‡∏ó‡∏µ √ó 2,000 XinCoin)`;
            }

            // Update total with bail and red case jail info display
            const redCaseJailInfoTotal = document.getElementById('redCaseJailInfoTotal');
            const redCaseJailTextTotal = document.getElementById('redCaseJailTextTotal');

            if (hasRedCases && redCaseJail > 0) {
                document.getElementById('totalWithBail').textContent = totalWithBail.toLocaleString() + ' XinCoin + ‡∏Ñ‡∏î‡∏µ‡πÅ‡∏î‡∏á ' + redCaseJail + ' ‡∏ô‡∏≤‡∏ó‡∏µ';
                redCaseJailInfoTotal.classList.add('hidden'); // Hide the separate red case info
            } else {
                document.getElementById('totalWithBail').textContent = totalWithBail.toLocaleString() + ' XinCoin';
                redCaseJailInfoTotal.classList.add('hidden');
            }

            // Show results
            document.getElementById('noCalculation').classList.add('hidden');
            document.getElementById('calculationResults').classList.remove('hidden');
            document.getElementById('copyButtonContainer').classList.remove('hidden');
        }

        // Calculate charges with modifiers (manual button)
        function calculateCharges() {
            if (selectedCharges.length === 0) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏´‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì');
                return;
            }

            // Enable real-time mode
            isRealTimeMode = true;
            calculateAndDisplayResults();
        }

        // Clear all charges
        function clearAllCharges() {
            // Reset all illegal item appearances
            selectedCharges.forEach(charge => {
                if (chargeDatabase[charge.originalId]?.quantity) {
                    updateIllegalItemAppearance(charge.originalId, false);
                }
            });

            selectedCharges = [];
            isRealTimeMode = false; // Disable real-time mode
            updateSelectedChargesDisplay();
            updateTotalCalculation();
            updateChargeItemAppearance();

            // Hide results
            document.getElementById('noCalculation').classList.remove('hidden');
            document.getElementById('calculationResults').classList.add('hidden');
            document.getElementById('copyButtonContainer').classList.add('hidden');
        }

        // Copy charges to clipboard
        function copyCharges() {
            if (selectedCharges.length === 0) {
                alert('‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å');
                return;
            }

            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏õ
            let chargeNames = [];
            selectedCharges.forEach(charge => {
                if (charge.quantity > 1) {
                    chargeNames.push(`${charge.name} (${charge.quantity})`);
                } else {
                    chargeNames.push(charge.name);
                }
            });

            const copyText = chargeNames.join(', ');

            // Try modern clipboard API first, then fallback to older method
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(copyText).then(() => {
                    showCopySuccess('copyChargesBtn');
                }).catch(() => {
                    fallbackCopyToClipboard(copyText, 'copyChargesBtn');
                });
            } else {
                fallbackCopyToClipboard(copyText, 'copyChargesBtn');
            }
        }

        // Fallback copy method for older browsers or non-secure contexts
        function fallbackCopyToClipboard(text, buttonId) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();

            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopySuccess(buttonId);
                } else {
                    alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏î Ctrl+C');
                }
            } catch (err) {
                alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏î Ctrl+C');
            }

            document.body.removeChild(textArea);
        }

        // Show copy success feedback
        function showCopySuccess(buttonId) {
            const button = document.getElementById(buttonId);
            const originalText = button.innerHTML;
            const originalClasses = button.className;

            button.innerHTML = '‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!';
            button.className = button.className.replace(/bg-\w+-\d+/g, 'bg-green-600');

            setTimeout(() => {
                button.innerHTML = originalText;
                button.className = originalClasses;
            }, 2000);
        }

        // Switch category
        function switchCategory(category) {
            // Update tab appearance
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-category="${category}"]`).classList.add('active');

            // Show/hide content
            document.querySelectorAll('.category-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.querySelector(`.category-content[data-category="${category}"]`).classList.remove('hidden');
        }

        // Helper functions for charge categorization
        function isRedCaseCharge(chargeId) {
            const redCaseCharges = [
                'noCooperation', 'stealGovCar', 'disturbOfficer', 'disturbGovArea',
                'impersonateOfficer', 'falseReport', 'assaultOfficer',
                'intentAssaultOfficer', 'embezzlementRed'
            ];
            return redCaseCharges.includes(chargeId.replace(/_\d+$/, ''));
        }

        function isMultiplierCharge(chargeId) {
            const multiplierCharges = ['outOfCity', 'darkCar', 'mountain', 'beforeServerReset'];
            return multiplierCharges.includes(chargeId.replace(/_\d+$/, ''));
        }



        // Search functionality
        function initializeSearch() {
            const searchInput = document.getElementById('searchInput');
            const clearSearchBtn = document.getElementById('clearSearch');
            const searchResults = document.getElementById('searchResults');
            const searchCount = document.getElementById('searchCount');

            if (!searchInput) return;

            searchInput.addEventListener('input', function () {
                const searchTerm = this.value.toLowerCase().trim();

                if (searchTerm === '') {
                    // Clear search
                    clearSearchBtn.classList.add('hidden');
                    searchResults.classList.add('hidden');
                    document.querySelectorAll('.charge-item').forEach(item => {
                        item.style.display = 'block';
                    });
                    return;
                }

                clearSearchBtn.classList.remove('hidden');

                let matchCount = 0;
                document.querySelectorAll('.charge-item').forEach(item => {
                    const keywords = item.getAttribute('data-keywords') || '';
                    const chargeName = item.querySelector('h4').textContent.toLowerCase();
                    const chargeDesc = item.querySelector('p').textContent.toLowerCase();

                    const isMatch = keywords.toLowerCase().includes(searchTerm) ||
                        chargeName.includes(searchTerm) ||
                        chargeDesc.includes(searchTerm);

                    if (isMatch) {
                        item.style.display = 'block';
                        matchCount++;
                    } else {
                        item.style.display = 'none';
                    }
                });

                searchCount.textContent = matchCount;
                searchResults.classList.remove('hidden');
            });

            clearSearchBtn.addEventListener('click', function () {
                searchInput.value = '';
                searchInput.dispatchEvent(new Event('input'));
            });
        }

        // Shift time calculation functions
        function calculateShiftTime() {
            const startTimeInput = document.getElementById('startTime');
            const endTimeInput = document.getElementById('endTime');

            if (!startTimeInput.value || !endTimeInput.value) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î');
                return;
            }

            const startTime = startTimeInput.value.trim();
            const endTime = endTimeInput.value.trim();

            // Validate time format and values using our validation function
            if (!validateTime(startTime)) {
                alert('‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á 0-23, ‡∏ô‡∏≤‡∏ó‡∏µ 0-59)');
                showTimeError(startTimeInput, '‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                return;
            }

            if (!validateTime(endTime)) {
                alert('‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á 0-23, ‡∏ô‡∏≤‡∏ó‡∏µ 0-59)');
                showTimeError(endTimeInput, '‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                return;
            }

            // Clear any existing errors
            clearTimeError(startTimeInput);
            clearTimeError(endTimeInput);

            // Convert time strings to minutes
            const startMinutes = timeToMinutes(startTime);
            let endMinutes = timeToMinutes(endTime);

            // Handle overnight shifts (if end time is earlier than start time)
            if (endMinutes < startMinutes) {
                endMinutes += 24 * 60; // Add 24 hours in minutes
            }

            const totalMinutes = endMinutes - startMinutes;
            const hours = Math.floor(totalMinutes / 60);
            const minutes = totalMinutes % 60;

            // Update display
            document.getElementById('totalHours').textContent = hours;
            document.getElementById('totalMinutes').textContent = minutes;
            document.getElementById('displayStartTime').textContent = startTime;
            document.getElementById('displayEndTime').textContent = endTime;
            document.getElementById('displayTotalTime').textContent = `${hours} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ${minutes} ‡∏ô‡∏≤‡∏ó‡∏µ`;
            document.getElementById('displayTotalMinutesOnly').textContent = `${totalMinutes} ‡∏ô‡∏≤‡∏ó‡∏µ`;

            // Show results and copy button
            document.getElementById('shiftResults').classList.remove('hidden');
            document.getElementById('copyShiftBtn').classList.remove('hidden');
        }

        function clearShiftTime() {
            document.getElementById('startTime').value = '';
            document.getElementById('endTime').value = '';
            document.getElementById('shiftResults').classList.add('hidden');
            document.getElementById('copyShiftBtn').classList.add('hidden');
        }

        function copyShiftTime() {
            const startTime = document.getElementById('startTime').value;
            const endTime = document.getElementById('endTime').value;
            const totalTime = document.getElementById('displayTotalTime').textContent;

            if (!startTime || !endTime) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å');
                return;
            }

            const copyText = `‡∏ä‡∏∑‡πà‡∏≠ : 
Username : 
‡πÄ‡∏ß‡∏•‡∏≤ : ${startTime}-${endTime}
‡∏£‡∏ß‡∏°‡πÄ‡∏ß‡∏•‡∏≤ : ${totalTime}`;

            // Try modern clipboard API first, then fallback to older method
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(copyText).then(() => {
                    showCopySuccess('copyShiftBtn');
                }).catch(() => {
                    fallbackCopyToClipboard(copyText, 'copyShiftBtn');
                });
            } else {
                fallbackCopyToClipboard(copyText, 'copyShiftBtn');
            }
        }

        function timeToMinutes(timeString) {
            const [hours, minutes] = timeString.split(':').map(Number);
            return hours * 60 + minutes;
        }



        // Validate time format and values
        function validateTime(timeString) {
            if (!timeString) return false;

            const parts = timeString.split(':');
            if (parts.length !== 2) return false;

            const hour = parseInt(parts[0]);
            const minute = parseInt(parts[1]);

            // Check if hour is between 0-23 and minute is between 0-59
            return !isNaN(hour) && !isNaN(minute) && hour >= 0 && hour <= 23 && minute >= 0 && minute <= 59;
        }

        // Format time input to standard HH:MM format
        function formatTimeInput(value) {
            // Remove all non-digit characters except colon
            let cleanValue = value.replace(/[^\d:]/g, '');

            // Handle different input formats
            if (cleanValue.includes(':')) {
                const parts = cleanValue.split(':');
                if (parts.length === 2) {
                    let hour = parts[0].padStart(2, '0');
                    let minute = parts[1].padStart(2, '0');

                    // Limit to 2 digits each
                    hour = hour.substring(0, 2);
                    minute = minute.substring(0, 2);

                    return `${hour}:${minute}`;
                }
            } else if (cleanValue.length >= 1) {
                // Handle formats like 9, 93, 930, 1630, etc.
                const digits = cleanValue.replace(/\D/g, '');

                if (digits.length === 1) {
                    // Single digit like "9" -> "09:00"
                    return `0${digits}:00`;
                } else if (digits.length === 2) {
                    // Two digits like "93" -> "09:30"
                    return `0${digits[0]}:${digits[1]}0`;
                } else if (digits.length === 3) {
                    // Three digits like "930" -> "09:30"
                    return `0${digits[0]}:${digits.substring(1)}`;
                } else if (digits.length >= 4) {
                    // Four or more digits like "1630" -> "16:30"
                    const hour = digits.substring(0, 2);
                    const minute = digits.substring(2, 4);
                    return `${hour}:${minute}`;
                }
            }

            return cleanValue;
        }

        // Validate time input without formatting
        function validateTimeInput(value) {
            let isValid = true;
            let errorMessage = '';

            // Check for time format HH:MM
            if (value.includes(':')) {
                const parts = value.split(':');
                if (parts.length === 2) {
                    const hour = parseInt(parts[0]);
                    const minute = parseInt(parts[1]);

                    if (isNaN(hour) || isNaN(minute)) {
                        isValid = false;
                        errorMessage = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á';
                    } else if (hour > 23) {
                        isValid = false;
                        errorMessage = '‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 23';
                    } else if (minute > 59) {
                        isValid = false;
                        errorMessage = '‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 59';
                    }
                }
            } else if (value.length >= 1) {
                // Check for formats like 1630, 930, etc.
                const numValue = value.replace(/[^\d]/g, '');
                if (numValue.length >= 1) {
                    let hour, minute;

                    if (numValue.length === 1) {
                        hour = parseInt(numValue);
                        minute = 0;
                    } else if (numValue.length === 2) {
                        hour = parseInt(numValue.substring(0, 1));
                        minute = parseInt(numValue.substring(1) + '0');
                    } else if (numValue.length === 3) {
                        hour = parseInt(numValue.substring(0, 1));
                        minute = parseInt(numValue.substring(1, 3));
                    } else {
                        hour = parseInt(numValue.substring(0, 2));
                        minute = parseInt(numValue.substring(2, 4));
                    }

                    if (hour > 23) {
                        isValid = false;
                        errorMessage = '‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 23';
                    } else if (minute > 59) {
                        isValid = false;
                        errorMessage = '‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 59';
                    }
                }
            }

            return { isValid, errorMessage };
        }

        // Show error message for time input
        function showTimeError(input, message) {
            // Remove existing error message
            const existingError = input.parentNode.querySelector('.time-error');
            if (existingError) {
                existingError.remove();
            }

            // Create error message element
            const errorDiv = document.createElement('div');
            errorDiv.className = 'time-error text-red-600 text-sm mt-1';
            errorDiv.textContent = message;

            // Add error styling to input
            input.style.borderColor = '#ef4444';
            input.style.backgroundColor = '#fef2f2';

            // Insert error message after input
            input.parentNode.appendChild(errorDiv);

            // Auto-remove error after 3 seconds
            setTimeout(() => {
                if (errorDiv.parentNode) {
                    errorDiv.remove();
                    input.style.borderColor = '';
                    input.style.backgroundColor = '';
                }
            }, 3000);
        }

        // Clear time error styling
        function clearTimeError(input) {
            const existingError = input.parentNode.querySelector('.time-error');
            if (existingError) {
                existingError.remove();
            }
            input.style.borderColor = '';
            input.style.backgroundColor = '';
        }

        // Initialize time inputs with validation and formatting
        function initializeTimeInputs() {
            const timeInputs = document.querySelectorAll('#startTime, #endTime');

            timeInputs.forEach(input => {
                // Validate on input
                input.addEventListener('input', function () {
                    clearTimeError(this);

                    const value = this.value.trim();
                    if (value.length >= 1) {
                        const result = validateTimeInput(value);
                        if (!result.isValid) {
                            showTimeError(this, result.errorMessage);
                        }
                    }
                });

                // Format and validate on blur
                input.addEventListener('blur', function () {
                    const value = this.value.trim();
                    if (value) {
                        const result = validateTimeInput(value);
                        if (!result.isValid) {
                            showTimeError(this, result.errorMessage);
                        } else {
                            clearTimeError(this);
                            // Format the input to standard HH:MM format
                            const formattedTime = formatTimeInput(value);
                            if (formattedTime !== value) {
                                this.value = formattedTime;
                            }
                        }
                    }
                });

                // Reset styling on focus
                input.addEventListener('focus', function () {
                    clearTimeError(this);
                });
            });
        }

        // Initialize event listeners
        document.addEventListener('DOMContentLoaded', function () {
            // Initialize music controls
            initializeMusicControls();

            // Load saved playlist
            loadPlaylistFromStorage();

            // Initialize playlist display
            updatePlaylistDisplay();

            // Initialize search
            initializeSearch();

            // Add time input formatting
            initializeTimeInputs();

            // Category tab switching
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', function () {
                    const category = this.getAttribute('data-category');
                    switchCategory(category);
                });
            });

            // Load auto-play setting on initialization
            loadAutoPlaySetting();
        });
    </script>
    <script>(function () { function c() { var b = a.contentDocument || a.contentWindow.document; if (b) { var d = b.createElement('script'); d.innerHTML = "window.__CF$cv$params={r:'9892f445328ba1c2',t:'MTc1OTU2MjgxOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);"; b.getElementsByTagName('head')[0].appendChild(d) } } if (document.body) { var a = document.createElement('iframe'); a.height = 1; a.width = 1; a.style.position = 'absolute'; a.style.top = 0; a.style.left = 0; a.style.border = 'none'; a.style.visibility = 'hidden'; document.body.appendChild(a); if ('loading' !== document.readyState) c(); else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c); else { var e = document.onreadystatechange || function () { }; document.onreadystatechange = function (b) { e(b); 'loading' !== document.readyState && (document.onreadystatechange = e, c()) } } } })();</script>
</body>

</html>
